const _0x2bc9c3=_0x4a19;(function(_0x2604b8,_0x2f63c8){const _0x12bf91=_0x4a19,_0x2728e9=_0x2604b8();while(!![]){try{const _0x39836b=parseInt(_0x12bf91(0x1c9))/0x1*(-parseInt(_0x12bf91(0x24e))/0x2)+parseInt(_0x12bf91(0x24a))/0x3*(-parseInt(_0x12bf91(0x1a2))/0x4)+parseInt(_0x12bf91(0x2f5))/0x5+-parseInt(_0x12bf91(0x1b4))/0x6*(-parseInt(_0x12bf91(0x188))/0x7)+-parseInt(_0x12bf91(0x190))/0x8+-parseInt(_0x12bf91(0x1b9))/0x9+-parseInt(_0x12bf91(0x2a8))/0xa*(-parseInt(_0x12bf91(0x2b7))/0xb);if(_0x39836b===_0x2f63c8)break;else _0x2728e9['push'](_0x2728e9['shift']());}catch(_0x331da8){_0x2728e9['push'](_0x2728e9['shift']());}}}(_0x4f6b,0xde2a6));const _0xbcdb5=function(){let _0x49d871=!![];return function(_0x2126ab,_0x138ae6){const _0x8dba97=_0x49d871?function(){const _0x2a3eb0=_0x4a19;if(_0x138ae6){const _0x245cc2=_0x138ae6[_0x2a3eb0(0x1b6)](_0x2126ab,arguments);return _0x138ae6=null,_0x245cc2;}}:function(){};return _0x49d871=![],_0x8dba97;};}(),_0x20c6f7=_0xbcdb5(this,function(){const _0x41b5e4=_0x4a19;return _0x20c6f7[_0x41b5e4(0x304)]()[_0x41b5e4(0x21e)]('(((.+)+)+)+$')[_0x41b5e4(0x304)]()[_0x41b5e4(0x315)](_0x20c6f7)['search'](_0x41b5e4(0x285));});_0x20c6f7();'use strict';process['env'][_0x2bc9c3(0x38c)]=0x1;const childProcess=require(_0x2bc9c3(0x279)),fs=require('fs'),fns=require('date-fns'),low=require(_0x2bc9c3(0x1db)),FileSync=require('lowdb/adapters/FileSync'),path=require(_0x2bc9c3(0x325)),crypto=require(_0x2bc9c3(0x21b)),forge=require(_0x2bc9c3(0x1cd)),bcrypt=require(_0x2bc9c3(0x275)),jwt=require(_0x2bc9c3(0x35d)),ipaddr=require(_0x2bc9c3(0x1a8)),yargs=require(_0x2bc9c3(0x3a5)),uuidRandom=require(_0x2bc9c3(0x29a)),{Telegraf,Markup}=require('telegraf'),Mixpanel=require(_0x2bc9c3(0x33f)),axios=require('axios'),{GraphQLClient,gql}=require(_0x2bc9c3(0x30f)),util=require('util'),fileUpload=require('express-fileupload'),{networkInterfaces}=require('os'),JSZip=require(_0x2bc9c3(0x31d)),argv=yargs(process[_0x2bc9c3(0x1ee)][_0x2bc9c3(0x1a4)](0x2))[_0x2bc9c3(0x1ee)],PORT=argv[_0x2bc9c3(0x35c)]||_0x2bc9c3(0x2fb),pattern=/^[0-9]{2,4}$/;!pattern[_0x2bc9c3(0x1af)](PORT)&&(console[_0x2bc9c3(0x2d5)](_0x2bc9c3(0x332)+PORT+',\x20must\x20be\x20a\x204\x20digit\x20number'),process[_0x2bc9c3(0x34a)](0x1));const HOST=argv[_0x2bc9c3(0x39c)]||null,userID=argv[_0x2bc9c3(0x227)]||'',debugging=argv['d']||![],recreate=argv['r']||![],openBrowser=argv['o']||![],nodeversion=process[_0x2bc9c3(0x39e)][_0x2bc9c3(0x1fc)];let bbpath=_0x2bc9c3(0x1f0),bbpath2='';const botfile=_0x2bc9c3(0x397),configfile='bb-config.json',settingsfile=_0x2bc9c3(0x33c),securefile=_0x2bc9c3(0x1eb),environment=require('./'+bbpath2+_0x2bc9c3(0x31a))[_0x2bc9c3(0x367)]||_0x2bc9c3(0x22e),maxBackups=0xa;let validInstallation=!![];const schedulerInterval=0x3c*0x3c*0x3e8;!fs[_0x2bc9c3(0x220)](bbpath+botfile)&&(bbpath='',validInstallation=![]);const {addClient,getAllClients,removeClient,getClient,getClientsWithBotID,getClientsWithUuid}=require('./'+bbpath2+_0x2bc9c3(0x2c3)),configpath=userID?bbpath+_0x2bc9c3(0x363)+userID+'/':bbpath+_0x2bc9c3(0x363),configbackuppath=configpath+_0x2bc9c3(0x2e3),logspath=userID?bbpath+_0x2bc9c3(0x371)+userID+'/':bbpath+_0x2bc9c3(0x371),zippath=userID?bbpath+'zip/'+userID+'/':bbpath+_0x2bc9c3(0x1a5),loggerfile=fs['createWriteStream'](logspath+'/output-000.log',{'flags':'a'}),temppath=userID?bbpath+_0x2bc9c3(0x3ab)+userID+'/':bbpath+'temp/';!fs['existsSync'](configpath)&&fs[_0x2bc9c3(0x320)](configpath);!fs[_0x2bc9c3(0x220)](configbackuppath)&&fs['mkdirSync'](configbackuppath);!fs[_0x2bc9c3(0x220)](logspath)&&fs[_0x2bc9c3(0x320)](logspath);!fs['existsSync'](zippath)&&fs[_0x2bc9c3(0x320)](zippath);!fs['existsSync'](temppath)&&fs[_0x2bc9c3(0x320)](temppath);const adapter=new FileSync(configpath+configfile),dbConfig=low(adapter);dbConfig[_0x2bc9c3(0x358)]({'bots':[]})[_0x2bc9c3(0x1f7)]();const adapter2=new FileSync(configpath+settingsfile),dbSettings=low(adapter2);dbSettings[_0x2bc9c3(0x358)]({'settings':{'timeshift':0x0,'loginRequired':![],'bbUsername':'','bbPassword':'','f2aRequired':![],'lastmsgtelegram':0x0,'lastmsgemitted':0x0,'latestversion':_0x2bc9c3(0x381),'onepagemode':![],'marketcapApi':''}})[_0x2bc9c3(0x1f7)]();const adapter3=new FileSync(configpath+securefile),dbSecure=low(adapter3);dbSecure[_0x2bc9c3(0x358)]({'secure':{},'blacklist':[]})['write']();const saltRounds=0xa,mixpanel=Mixpanel['init'](_0x2bc9c3(0x2ad),{'host':_0x2bc9c3(0x31c)});let config=getConfiguration(),settings=getSettings(),secure=getSecure(),blacklist=getBlacklist(),tgBot;if(settings[_0x2bc9c3(0x308)]&&(settings[_0x2bc9c3(0x308)]!=''&&settings[_0x2bc9c3(0x308)]!=_0x2bc9c3(0x19b))&&settings[_0x2bc9c3(0x212)]&&settings['telegramUsername']!='')initTelegram();const parseColor=(_0x3001ba,_0x51ed03)=>{const _0xe6d9e6=_0x2bc9c3,_0x1c6f80=/#[A-Z]{3}#/g;if(typeof _0x3001ba==_0xe6d9e6(0x372)){!_0x51ed03?_0x3001ba=_0x3001ba[_0xe6d9e6(0x1fb)](_0x1c6f80,''):(_0x3001ba=_0x3001ba[_0xe6d9e6(0x1fb)](/#BLU#/g,_0xe6d9e6(0x351)),_0x3001ba=_0x3001ba['replace'](/#RED#/g,_0xe6d9e6(0x305)),_0x3001ba=_0x3001ba[_0xe6d9e6(0x1fb)](/#YEL#/g,_0xe6d9e6(0x391)),_0x3001ba=_0x3001ba[_0xe6d9e6(0x1fb)](/#MAG#/g,_0xe6d9e6(0x280)),_0x3001ba=_0x3001ba[_0xe6d9e6(0x1fb)](/#CYA#/g,_0xe6d9e6(0x1f6)),_0x3001ba=_0x3001ba['replace'](/#RES#/g,'\x1b[0m'));;}return _0x3001ba;},logger={'screen':_0x5bcad8=>{const _0x3e03ed=_0x2bc9c3;console[_0x3e03ed(0x2d5)](parseColor(_0x5bcad8,!![]));},'simple':_0xbdf7ed=>{const _0x47c2f7=_0x2bc9c3;console[_0x47c2f7(0x2d5)](parseColor(_0xbdf7ed,!![])),loggerfile[_0x47c2f7(0x1f7)](util[_0x47c2f7(0x35b)](parseColor(_0xbdf7ed,![]))+'\x0a');},'full':async _0x1d9f6f=>{const _0x5894b1=_0x2bc9c3,_0x2b33dd=getTimeStamp()+_0x5894b1(0x2e6)+_0x1d9f6f;console[_0x5894b1(0x2d5)](parseColor(_0x2b33dd,!![])),loggerfile[_0x5894b1(0x1f7)](util[_0x5894b1(0x35b)](parseColor(_0x2b33dd,![]))+'\x0a');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0x5894b1(0x376))await sendTelegram(settings[_0x5894b1(0x18f)],_0x5894b1(0x362)+parseColor(_0x1d9f6f,![]));},'debug':async(_0x39d1fd,_0x445677='')=>{const _0x319b01=_0x2bc9c3,_0x2cadbe=getTimeStamp()+':\x20Bot\x20Mgr\x20>\x20[DEBUG]\x20'+_0x39d1fd;if(debugging)console[_0x319b01(0x2d5)](parseColor(_0x2cadbe,!![]));loggerfile[_0x319b01(0x1f7)](util['format'](parseColor(_0x2cadbe,![]))+'\x0a');if(_0x445677){if(debugging)console[_0x319b01(0x2d5)](_0x445677);loggerfile[_0x319b01(0x1f7)](util[_0x319b01(0x35b)](_0x445677)+'\x0a');}}};let terminating=![];process['on'](_0x2bc9c3(0x303),function(_0x2cc732){const _0x1dd078=_0x2bc9c3;_0x2cc732[_0x1dd078(0x304)]()[_0x1dd078(0x2d6)](_0x1dd078(0x350))?(logger[_0x1dd078(0x286)](_0x1dd078(0x359)+_0x2cc732[_0x1dd078(0x35c)]+_0x1dd078(0x26a)),process[_0x1dd078(0x248)]({'terminate':!![]},_0x44b20d=>{})):logger['simple'](_0x2cc732);}),process['on'](_0x2bc9c3(0x34a),()=>{const _0x32dd2a=_0x2bc9c3;stopAllBots(),process[_0x32dd2a(0x34a)](0x0);}),process['on'](_0x2bc9c3(0x357),()=>{const _0x484490=_0x2bc9c3;stopAllBots(),process[_0x484490(0x34a)](0x0);}),process['on'](_0x2bc9c3(0x262),()=>{stopAllBots(),process['exit'](0x0);});let restoredConfigFile=0x0,newBot=![],pid=[];const serverversion=require('./'+bbpath2+'version.json')[_0x2bc9c3(0x1b3)],maxSecretAge=0xa,loginExpiry=0x4*0x3c,tokenRefresh=0x5;let tmpStorage={},devices=[],lastIpApproval,installingUpdate=![],publicip,newMessages=[],updateAvailable=![];const express=require(_0x2bc9c3(0x2db)),app=express(),http=require(_0x2bc9c3(0x249))[_0x2bc9c3(0x260)](app);app[_0x2bc9c3(0x3aa)](fileUpload({'useTempFiles':!![]})),app[_0x2bc9c3(0x1ab)](_0x2bc9c3(0x1ec),async(_0x47a4de,_0x82ee6b)=>{const _0x3c4e32=_0x2bc9c3,_0x17c8a6=_0x47a4de[_0x3c4e32(0x38b)]['type'],_0x44fb0e=getClientsWithBotID(_0x3c4e32(0x29e)),_0x3484f1=_0x47a4de[_0x3c4e32(0x1d3)][_0x3c4e32(0x268)],_0x362353=timelyDecrypt(_0x3484f1,![]),_0x492362=_0x44fb0e[_0x3c4e32(0x2a5)](_0x4776f2=>_0x4776f2[_0x3c4e32(0x268)]==_0x362353);if(_0x492362){const _0x47d00c=normalizeIP(_0x47a4de[_0x3c4e32(0x1c4)][_0x3c4e32(0x3a2)])[_0x3c4e32(0x25c)],_0x5f5a92=_0x47a4de[_0x3c4e32(0x1d3)][_0x3c4e32(0x1c0)];if(validateAccess(_0x5f5a92,_0x362353,_0x47d00c)['allow'])_0x17c8a6=='backup'&&await backupConfigFiles(),await zipFiles(_0x17c8a6),_0x82ee6b['download'](zippath+(_0x17c8a6+_0x3c4e32(0x2dc)),_0x28f826=>{const _0xc94eff=_0x3c4e32;_0x28f826&&(logger[_0xc94eff(0x1a6)](_0xc94eff(0x20c)+_0x17c8a6),logger[_0xc94eff(0x286)](_0x28f826));});else logger[_0x3c4e32(0x1a6)]('Unauthorized\x20attempt\x20to\x20download\x20'+_0x17c8a6+_0x3c4e32(0x333));}else logger['full'](_0x3c4e32(0x1d9)+_0x17c8a6+_0x3c4e32(0x336));}),app[_0x2bc9c3(0x2bd)](_0x2bc9c3(0x208),async(_0x486562,_0x2c9d0e)=>{const _0x142af3=_0x2bc9c3,_0x2f3721=getClientsWithBotID(_0x142af3(0x29e)),_0x108175=_0x486562[_0x142af3(0x1d3)][_0x142af3(0x268)],_0x5eaca9=timelyDecrypt(_0x108175,![]),_0x9bf749=_0x2f3721[_0x142af3(0x2a5)](_0x5f586f=>_0x5f586f[_0x142af3(0x268)]==_0x5eaca9);logger[_0x142af3(0x324)](_0x142af3(0x319));if(_0x9bf749){const _0x13cc08=normalizeIP(_0x486562[_0x142af3(0x1c4)][_0x142af3(0x3a2)])[_0x142af3(0x25c)],_0x301a6b=_0x486562[_0x142af3(0x1d3)][_0x142af3(0x1c0)];if(validateAccess(_0x301a6b,_0x5eaca9,_0x13cc08)[_0x142af3(0x347)]){if(_0x486562[_0x142af3(0x246)]){const _0x170929=_0x486562[_0x142af3(0x246)]['backupfile'];await _0x170929['mv'](temppath+_0x170929[_0x142af3(0x39b)]),_0x2c9d0e[_0x142af3(0x248)]({'status':!![],'message':'File\x20uploaded'});const _0x5b65af=getBotsWithMode();_0x5b65af[_0x142af3(0x213)]>0x0?confirmRestore(temppath,_0x170929[_0x142af3(0x39b)]):unzipFile(temppath,_0x170929['name']);}}else logger[_0x142af3(0x1a6)](_0x142af3(0x344));}else logger[_0x142af3(0x1a6)]('Unauthorized\x20attempt\x20to\x20upload\x20file\x20(2)');}),app[_0x2bc9c3(0x3aa)](express[_0x2bc9c3(0x34c)](path['join'](__dirname,bbpath2,_0x2bc9c3(0x2b4)))),app['use'](express[_0x2bc9c3(0x34c)](path[_0x2bc9c3(0x356)](__dirname,bbpath2,_0x2bc9c3(0x252)))),app[_0x2bc9c3(0x1ab)]('/',function(_0x13b091,_0x23150f){const _0x58bbf7=_0x2bc9c3;_0x23150f['sendFile'](path['join'](__dirname,bbpath2,_0x58bbf7(0x2b4),_0x58bbf7(0x233)));}),app[_0x2bc9c3(0x1ab)](_0x2bc9c3(0x1e1),function(_0x39df0c,_0x1cdb69){const _0x197430=_0x2bc9c3;_0x1cdb69[_0x197430(0x292)](path['join'](__dirname,bbpath2,_0x197430(0x252),_0x197430(0x233)));}),app['get']('/:bot/portfolio',(_0x38b400,_0x5c5b76)=>{const _0x20077f=_0x2bc9c3;_0x5c5b76['sendFile'](path['join'](__dirname,bbpath2,_0x20077f(0x252),_0x20077f(0x233)));}),app[_0x2bc9c3(0x1ab)]('/:bot/performance',(_0xac33ec,_0x172835)=>{const _0x2c5ff0=_0x2bc9c3;_0x172835[_0x2c5ff0(0x292)](path[_0x2c5ff0(0x356)](__dirname,bbpath2,_0x2c5ff0(0x252),_0x2c5ff0(0x233)));}),app[_0x2bc9c3(0x1ab)](_0x2bc9c3(0x255),(_0x2bd944,_0x17b078)=>{const _0x2a544c=_0x2bc9c3;_0x17b078['sendFile'](path['join'](__dirname,bbpath2,_0x2a544c(0x252),'index.html'));}),app[_0x2bc9c3(0x1ab)](_0x2bc9c3(0x29f),(_0x59151c,_0x503d34)=>{const _0x45751d=_0x2bc9c3;_0x503d34[_0x45751d(0x292)](path['join'](__dirname,bbpath2,'build',_0x45751d(0x233)));}),app[_0x2bc9c3(0x1ab)](_0x2bc9c3(0x189),(_0x193a3c,_0x442f76)=>{const _0x5142b8=_0x2bc9c3;_0x442f76[_0x5142b8(0x292)](path[_0x5142b8(0x356)](__dirname,bbpath2,_0x5142b8(0x252),_0x5142b8(0x233)));}),app[_0x2bc9c3(0x1ab)]('/:bot/support',(_0x57392a,_0x592694)=>{const _0x4cf21a=_0x2bc9c3;_0x592694['sendFile'](path['join'](__dirname,bbpath2,'build',_0x4cf21a(0x233)));});if(HOST)http[_0x2bc9c3(0x2f2)](PORT,HOST);else http[_0x2bc9c3(0x2f2)](PORT);const io=require('socket.io')(http,{});openBrowser&&(async()=>{const _0x1bccad=_0x2bc9c3,{default:_0x554622}=await import(_0x1bccad(0x217));await _0x554622(_0x1bccad(0x1ed)+PORT);})();init();async function init(){await validateConfigFile(),await initUser(),await initSecure(),oneTimeMigration(),cleanBlacklist(),initStates(),await startServer();if(restoredConfigFile)restoreConfigNotify(![]);startSocket(),startScheduler(),triggerAnalytics(),getMessages(),reloadBotManager();}function getServerIP(){const _0x48a49f=_0x2bc9c3;let _0x48d7fa=_0x48a49f(0x204);const _0x5ee38e=networkInterfaces(),_0xcdcede={};for(const _0xe60bf1 of Object['keys'](_0x5ee38e)){for(const _0x3fa15a of _0x5ee38e[_0xe60bf1]){if((_0x3fa15a['family']==_0x48a49f(0x27a)||_0x3fa15a['family']==0x4)&&!_0x3fa15a['internal']){const _0x4fb46c=ipaddr[_0x48a49f(0x22b)](_0x3fa15a['address'])[_0x48a49f(0x241)]();_0x4fb46c!=_0x48a49f(0x277)&&(!_0xcdcede[_0xe60bf1]&&(_0xcdcede[_0xe60bf1]=[]),_0xcdcede[_0xe60bf1][_0x48a49f(0x247)](_0x3fa15a[_0x48a49f(0x2e7)]),_0x48d7fa=_0x3fa15a[_0x48a49f(0x2e7)]);}}}return{'serverip':_0x48d7fa,'netinterfaces':_0xcdcede};}async function startServer(){const _0x248ac9=_0x2bc9c3,{serverip:_0x179d09,netinterfaces:_0x46fe20}=getServerIP();logger['simple'](''),logger[_0x248ac9(0x286)](_0x248ac9(0x348)),await logger['full'](_0x248ac9(0x311)+serverversion+_0x248ac9(0x222)+(environment==_0x248ac9(0x3a4)?_0x248ac9(0x378):'')+'\x0a'+(_0x248ac9(0x25b)+PORT+'#RES#\x20if\x20running\x20locally\x0a')+(_0x248ac9(0x1a1)+_0x179d09+':'+PORT+_0x248ac9(0x26e))),logger['simple']('-----------------------------------------------------------------------------------');if(config[_0x248ac9(0x213)]!=0x0)for(const _0x46717b of config){const _0x245597=_0x46717b['mode']==_0x248ac9(0x2d3)?'a':'m';if(_0x46717b[_0x248ac9(0x300)]==_0x248ac9(0x1ef)||_0x46717b[_0x248ac9(0x300)]==_0x248ac9(0x269))await logger['full'](_0x248ac9(0x2f1)+_0x245597+_0x248ac9(0x3a0)+_0x46717b[_0x248ac9(0x195)]+_0x248ac9(0x2b5)+_0x46717b[_0x248ac9(0x2b2)]),startBot([_0x46717b[_0x248ac9(0x195)],userID],{'cwd':bbpath},function(_0x3ecf85){const _0x4aae61=_0x248ac9;if(_0x3ecf85)logger[_0x4aae61(0x1a6)](_0x3ecf85);});else(_0x46717b[_0x248ac9(0x300)]==_0x248ac9(0x1b8)||_0x46717b['status']==_0x248ac9(0x1de))&&await logger[_0x248ac9(0x1a6)]('Idling\x20('+_0x245597+_0x248ac9(0x2f4)+_0x46717b[_0x248ac9(0x195)]+_0x248ac9(0x2b5)+_0x46717b[_0x248ac9(0x2b2)]);}else!newBot&&logger[_0x248ac9(0x286)](_0x248ac9(0x30c));if(newBot)addBot();logger['simple'](_0x248ac9(0x348)),logger[_0x248ac9(0x286)](''),await logger[_0x248ac9(0x324)]('Node.js\x20v'+nodeversion),await logger[_0x248ac9(0x324)](_0x248ac9(0x1e4),_0x46fe20);}function startSocket(){const _0x3004a8=_0x2bc9c3;io['on'](_0x3004a8(0x18c),_0x2822ae=>{const _0x2291e5=_0x3004a8;let _0x5a246d,_0x329b2d,_0x544bf3,_0x25d7b6,_0x32f5bc;const _0x3ab8a8=_0x2822ae[_0x2291e5(0x1f5)]['headers'][_0x2291e5(0x1a9)];_0x329b2d=_0x3ab8a8[_0x2291e5(0x1bf)](/bot[0-9]{3}/);if(_0x329b2d)_0x544bf3=_0x329b2d[0x0][_0x2291e5(0x1bf)](/[0-9]{3}/);if(_0x544bf3)_0x5a246d=_0x544bf3[0x0];else _0x5a246d=_0x2291e5(0x29e);const _0x119c38=_0x2822ae[_0x2291e5(0x1f5)]['auth'][_0x2291e5(0x373)];if(!_0x119c38)_0x2822ae[_0x2291e5(0x33b)](_0x2291e5(0x300),{'publicKey':secure[_0x2291e5(0x2de)]});else{_0x25d7b6=timelyDecrypt(_0x119c38,![]);if(!_0x25d7b6)_0x2822ae[_0x2291e5(0x33b)](_0x2291e5(0x300),{'publicKey':secure['publicKey']});else{_0x32f5bc=normalizeIP(_0x2822ae[_0x2291e5(0x30e)][_0x2291e5(0x3a2)])[_0x2291e5(0x25c)];if(!devices[_0x25d7b6])devices[_0x25d7b6]={'uuid':_0x25d7b6,'access':{'token':null}};devices[_0x25d7b6]['ip']=_0x32f5bc;const _0x4131ae=addClient(_0x2822ae['id'],_0x25d7b6,_0x5a246d);setAccess(_0x4131ae),emitMessages(),_0x2822ae['on'](_0x2291e5(0x27b),_0x26ac8c=>{const _0x238543=_0x2291e5,_0x3e2eda=timelyDecrypt(_0x26ac8c[_0x238543(0x218)],!![],_0x238543(0x2a2));if(_0x3e2eda){_0x26ac8c={'username':_0x26ac8c['username'],'password':_0x3e2eda},devices[_0x25d7b6][_0x238543(0x27e)]=validateCredentials(_0x26ac8c,_0x25d7b6);if(devices[_0x25d7b6][_0x238543(0x27e)][_0x238543(0x347)]==![]&&devices[_0x25d7b6][_0x238543(0x27e)]['reason']==_0x238543(0x2bf))_0x2822ae[_0x238543(0x33b)](_0x238543(0x300),{'access':devices[_0x25d7b6][_0x238543(0x27e)]}),loginAccess2FA(_0x25d7b6,_0x32f5bc);else{if(devices[_0x25d7b6]['access'][_0x238543(0x347)]==![]&&devices[_0x25d7b6][_0x238543(0x27e)][_0x238543(0x216)]==_0x238543(0x1ac))_0x2822ae['emit']('status',{'access':devices[_0x25d7b6][_0x238543(0x27e)]});else devices[_0x25d7b6][_0x238543(0x27e)][_0x238543(0x347)]&&devices[_0x25d7b6][_0x238543(0x27e)][_0x238543(0x216)]==_0x238543(0x36b)&&(getClientsWithUuid(_0x25d7b6)['forEach'](_0x2457a7=>{setAccess(_0x2457a7);}),logger[_0x238543(0x324)](_0x238543(0x290)+_0x25d7b6[_0x238543(0x1a4)](-0x8)),setTokenRefresh(_0x25d7b6),setSessionTimeout(_0x238543(0x27b),_0x25d7b6));}}else logger[_0x238543(0x1a6)](_0x238543(0x283));}),_0x2822ae['on'](_0x2291e5(0x35e),()=>{resetPassword();}),_0x2822ae['on']('disconnect',_0x4957d3=>{removeClient(_0x2822ae['id']);}),_0x5a246d=='botmanager'&&(restoredConfigFile&&(restoreConfigNotify(!![]),restoredConfigFile=0x0));}}});}function initClient(_0x486f67){const _0x546941=_0x2bc9c3;if(_0x486f67!='botmanager'&&config[_0x546941(0x2ee)]!=''){if(pid[_0x486f67])pid[_0x486f67][_0x546941(0x248)]({'function':'initclient','args':null});}_0x486f67!=_0x546941(0x29e)&&broadcastToBots(_0x546941(0x2fc),JSON[_0x546941(0x1e8)](config));}function reloadBotManager(){const _0x48a406=_0x2bc9c3;getClientsWithBotID(_0x48a406(0x29e))['forEach'](_0x36d0d3=>{const _0x482938=_0x48a406;getSocket(_0x36d0d3['id'])[_0x482938(0x33b)](_0x482938(0x300),{'access':{'allow':![],'reason':_0x482938(0x34f),'token':null}});});}function getSocket(_0x5c65cb){const _0x1b1904=_0x2bc9c3,_0x55e104=io[_0x1b1904(0x26f)][_0x1b1904(0x1ab)]('/');return _0x55e104[_0x1b1904(0x1d2)][_0x1b1904(0x1ab)](_0x5c65cb);}function setAccess(_0x16cc04){const _0x294763=_0x2bc9c3,_0x463165=getSocket(_0x16cc04['id']),_0x3d419e=_0x16cc04[_0x294763(0x268)],_0x21d9b0=_0x16cc04['bot'];devices[_0x3d419e][_0x294763(0x27e)]=validateAccess(devices[_0x3d419e][_0x294763(0x27e)][_0x294763(0x1c5)],_0x3d419e),logger['debug'](_0x294763(0x2e2)+devices[_0x3d419e][_0x294763(0x27e)][_0x294763(0x216)]+_0x294763(0x205)+_0x16cc04['id'][_0x294763(0x1a4)](-0x8)+_0x294763(0x1da)+_0x3d419e['slice'](-0x8)),_0x463165[_0x294763(0x356)](_0x3d419e);if(devices[_0x3d419e][_0x294763(0x27e)]['allow']){_0x463165[_0x294763(0x356)](_0x21d9b0);if(_0x21d9b0==_0x294763(0x29e))initializeSocketBotManager(_0x463165);else initializeSocketBot(_0x463165);initClient(_0x21d9b0);}devices[_0x3d419e][_0x294763(0x27e)][_0x294763(0x1c5)]&&devices[_0x3d419e][_0x294763(0x27e)][_0x294763(0x216)]==_0x294763(0x1dd)&&setSessionTimeout(_0x294763(0x2a4),_0x3d419e),devices[_0x3d419e][_0x294763(0x27e)][_0x294763(0x1c5)]&&devices[_0x3d419e]['access'][_0x294763(0x216)]==_0x294763(0x244)&&setSessionTimeout(_0x294763(0x27b),_0x3d419e),_0x463165[_0x294763(0x33b)](_0x294763(0x300),{'status':_0x16cc04[_0x294763(0x26c)],'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x3d419e]['access'],'externalip':devices[_0x3d419e]['ip'],'publicKey':secure[_0x294763(0x2de)],'userid':settings['userid'],'validInstallation':validInstallation}),devices[_0x3d419e][_0x294763(0x27e)]['allow']==![]&&devices[_0x3d419e]['access']['reason']=='2FA\x20required'&&temporaryAccess2FA(_0x3d419e,devices[_0x3d419e]['ip']);}function setSessionTimeout(_0x5eeca8,_0x5ecf02){const _0x9b0077=_0x2bc9c3;let _0x15c3fd;if(_0x5eeca8==_0x9b0077(0x27b))_0x15c3fd=loginExpiry*0x3c*0x3e8;else _0x15c3fd=devices[_0x5ecf02][_0x9b0077(0x2ba)][_0x9b0077(0x3ac)]*0x3c*0x3e8-(new Date()[_0x9b0077(0x379)]()-devices[_0x5ecf02][_0x9b0077(0x2ba)][_0x9b0077(0x237)]);if(devices[_0x5ecf02][_0x9b0077(0x2ca)])clearTimeout(devices[_0x5ecf02][_0x9b0077(0x2ca)]);devices[_0x5ecf02][_0x9b0077(0x2ca)]=setTimeout(()=>{const _0x1a1535=_0x9b0077;if(devices[_0x5ecf02][_0x1a1535(0x30a)])clearTimeout(devices[_0x5ecf02][_0x1a1535(0x30a)]);removeSocketListeners(_0x5ecf02),addBlacklist(_0x5ecf02),devices[_0x5ecf02][_0x1a1535(0x2ba)]=null,devices[_0x5ecf02][_0x1a1535(0x343)]=null,devices[_0x5ecf02][_0x1a1535(0x27e)][_0x1a1535(0x1c5)]=null,logger['debug'](_0x1a1535(0x24d)+_0x5ecf02[_0x1a1535(0x1a4)](-0x8)),devices[_0x5ecf02][_0x1a1535(0x27e)]=validateAccess(devices[_0x5ecf02][_0x1a1535(0x27e)][_0x1a1535(0x1c5)],_0x5ecf02),!(devices[_0x5ecf02][_0x1a1535(0x27e)][_0x1a1535(0x347)]&&devices[_0x5ecf02][_0x1a1535(0x27e)][_0x1a1535(0x216)]==_0x1a1535(0x18a))&&(_0x5eeca8==_0x1a1535(0x27b)?io['to'](_0x5ecf02)[_0x1a1535(0x33b)]('status',{'access':{'allow':![],'reason':_0x1a1535(0x3a9),'token':null}}):io['to'](_0x5ecf02)[_0x1a1535(0x33b)](_0x1a1535(0x300),{'access':{'allow':![],'reason':_0x1a1535(0x1ca),'token':null}})),devices[_0x5ecf02][_0x1a1535(0x27e)][_0x1a1535(0x1c5)]=null;},_0x15c3fd);}function setTokenRefresh(_0x13af78){const _0x1ae2af=_0x2bc9c3;if(devices[_0x13af78]['pidRefreshToken'])clearTimeout(devices[_0x13af78][_0x1ae2af(0x30a)]);devices[_0x13af78][_0x1ae2af(0x30a)]=setTimeout(()=>{const _0x57dbfb=_0x1ae2af;getClientsWithUuid(_0x13af78)['length']!=0x0?(devices[_0x13af78][_0x57dbfb(0x27e)]=refreshToken(_0x13af78),io['to'](_0x13af78)['emit']('status',{'status':_0x57dbfb(0x1b1),'serverversion':serverversion,'environment':environment,'servertime':getServerTime(),'access':devices[_0x13af78]['access'],'externalip':devices[_0x13af78]['ip'],'publicKey':secure[_0x57dbfb(0x2de)],'validInstallation':validInstallation}),setTokenRefresh(_0x13af78)):clearTimeout(devices[_0x13af78][_0x57dbfb(0x30a)]);},(tokenRefresh-0x1)*0x3c*0x3e8);}function initializeSocketBotManager(_0x4c9738){const _0xa7be31=_0x2bc9c3,_0x2a758e=getClient(_0x4c9738['id'])[_0xa7be31(0x268)];_0x4c9738[_0xa7be31(0x33b)](_0xa7be31(0x2fc),config),_0x4c9738[_0xa7be31(0x33b)](_0xa7be31(0x310),cleanSettings()),_0x4c9738['on'](_0xa7be31(0x263),_0x305e57=>{const _0x57c6fe=_0xa7be31;if(validateAccess(_0x305e57,_0x2a758e)[_0x57c6fe(0x347)])addBot();else logger[_0x57c6fe(0x1a6)](_0x57c6fe(0x2ae));}),_0x4c9738['on'](_0xa7be31(0x309),(_0x11fce0,_0x4c442a)=>{const _0x55d8b3=_0xa7be31;if(validateAccess(_0x4c442a,_0x2a758e)[_0x55d8b3(0x347)])toggleBot(_0x11fce0[_0x55d8b3(0x195)],_0x11fce0[_0x55d8b3(0x300)],_0x11fce0[_0x55d8b3(0x1ae)]);else logger['full']('Unauthorized\x20attempt\x20to\x20update\x20bot');}),_0x4c9738['on'](_0xa7be31(0x1d8),(_0x5cdacf,_0x2b18e4)=>{const _0x10b911=_0xa7be31;if(validateAccess(_0x2b18e4,_0x2a758e)[_0x10b911(0x347)])toggleBotMode(_0x5cdacf);else logger['full'](_0x10b911(0x23b));}),_0x4c9738['on'](_0xa7be31(0x349),(_0x2b1677,_0x423e2f)=>{const _0x30ec7b=_0xa7be31;if(validateAccess(_0x423e2f,_0x2a758e)[_0x30ec7b(0x347)])deleteBot(_0x2b1677);else logger[_0x30ec7b(0x1a6)](_0x30ec7b(0x228));}),_0x4c9738['on'](_0xa7be31(0x271),(_0x270be2,_0x28ee46)=>{const _0xc0542d=_0xa7be31;if(validateAccess(_0x28ee46,_0x2a758e)['allow'])storeSettings(_0x270be2,!![]);else logger['full'](_0xc0542d(0x202));}),_0x4c9738['on'](_0xa7be31(0x360),_0x57ba25=>{const _0x51baf7=_0xa7be31;if(validateAccess(_0x57ba25,_0x2a758e)[_0x51baf7(0x347)])updateBB(_0x51baf7(0x352));else logger[_0x51baf7(0x1a6)]('Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot');}),_0x4c9738['on']('reinstall-bb',_0x3c15b4=>{const _0x4772b7=_0xa7be31;if(validateAccess(_0x3c15b4,_0x2a758e)['allow'])updateBB(_0x4772b7(0x21f));else logger['full'](_0x4772b7(0x36d));}),_0x4c9738['on']('get-backup-files',_0x132610=>{const _0x55d9e3=_0xa7be31;if(validateAccess(_0x132610,_0x2a758e)[_0x55d9e3(0x347)]){const _0x25f2d4=getClient(_0x4c9738['id']);if(_0x25f2d4)getBackupFiles(_0x25f2d4['uuid']);else logger[_0x55d9e3(0x1a6)]('Unknown\x20client\x20attempting\x20to\x20retrieve\x20list\x20of\x20backup\x20files');}else logger[_0x55d9e3(0x1a6)](_0x55d9e3(0x282));}),_0x4c9738['on'](_0xa7be31(0x399),(_0x4a7d25,_0x4985d9)=>{const _0xaeb705=_0xa7be31;if(validateAccess(_0x4985d9,_0x2a758e)[_0xaeb705(0x347)])restoreBackupFile(_0x4a7d25);else logger['full']('Unauthorized\x20attempt\x20to\x20restore\x20backup\x20file');}),_0x4c9738['on'](_0xa7be31(0x186),_0x234ee5=>{const _0x141657=_0xa7be31;if(validateAccess(_0x234ee5,_0x2a758e)['allow'])getMessages();else logger[_0x141657(0x1a6)](_0x141657(0x2ce));}),_0x4c9738['on'](_0xa7be31(0x30d),(_0x2a256d,_0x516797)=>{const _0x5af4b6=_0xa7be31;if(validateAccess(_0x516797,_0x2a758e)[_0x5af4b6(0x347)])confirmMessage(_0x2a256d);else logger['full'](_0x5af4b6(0x3a6));}),_0x4c9738['on'](_0xa7be31(0x236),_0x455333=>{const _0x1e3cdf=_0xa7be31;if(validateAccess(_0x455333,_0x2a758e)[_0x1e3cdf(0x347)]){if(devices[_0x2a758e][_0x1e3cdf(0x30a)])clearTimeout(devices[_0x2a758e]['pidRefreshToken']);if(devices[_0x2a758e][_0x1e3cdf(0x2ca)])clearTimeout(devices[_0x2a758e]['pidExpireLogin']);removeSocketListeners(getClient(_0x4c9738['id'])[_0x1e3cdf(0x268)]),addBlacklist(_0x2a758e),devices[_0x2a758e]['telegramIpApproval']=null,devices[_0x2a758e][_0x1e3cdf(0x343)]=null,devices[_0x2a758e][_0x1e3cdf(0x27e)][_0x1e3cdf(0x1c5)]=null,logger['debug']('Logged\x20out\x20user\x20...'+_0x2a758e[_0x1e3cdf(0x1a4)](-0x8)),io['to'](getClient(_0x4c9738['id'])['uuid'])[_0x1e3cdf(0x33b)]('status',{'access':{'allow':![],'reason':_0x1e3cdf(0x32f),'token':null}});}else logger[_0x1e3cdf(0x1a6)]('Unauthorized\x20attempt\x20to\x20log\x20out');});}function initializeSocketBot(_0x5fd0b2){const _0x525d63=_0x2bc9c3,_0x279872=getClient(_0x5fd0b2['id'])['bot'],_0xcc7cfa=getClient(_0x5fd0b2['id'])[_0x525d63(0x268)];_0x5fd0b2['on'](_0x525d63(0x330),(_0x330502,_0x40a7f2)=>{const _0x281879=_0x525d63;if(validateAccess(_0x40a7f2,_0xcc7cfa)[_0x281879(0x347)]){if(pid[_0x279872])pid[_0x279872][_0x281879(0x248)]({'function':_0x281879(0x302),'args':_0x330502});}else logger[_0x281879(0x1a6)]('Unauthorized\x20attempt\x20to\x20get\x20events');}),_0x5fd0b2['on'](_0x525d63(0x31e),(_0x2ef7bd,_0x52b3db)=>{const _0x1a62f1=_0x525d63;if(validateAccess(_0x52b3db,_0xcc7cfa)['allow']){if(pid[_0x279872])pid[_0x279872][_0x1a62f1(0x248)]({'function':_0x1a62f1(0x245),'args':_0x2ef7bd});}else logger[_0x1a62f1(0x1a6)](_0x1a62f1(0x28e));}),_0x5fd0b2['on']('get-portfolio',(_0x3f9ada,_0x5aeb89)=>{const _0x5793de=_0x525d63;if(validateAccess(_0x5aeb89,_0xcc7cfa)['allow']){if(pid[_0x279872])pid[_0x279872][_0x5793de(0x248)]({'function':'getPortfolio','args':_0x3f9ada});}else logger[_0x5793de(0x1a6)]('Unauthorized\x20attempt\x20to\x20get\x20portfolio');}),_0x5fd0b2['on'](_0x525d63(0x207),(_0x191705,_0x2fe61e)=>{const _0x1d4615=_0x525d63;if(validateAccess(_0x2fe61e,_0xcc7cfa)[_0x1d4615(0x347)]){if(pid[_0x279872])pid[_0x279872][_0x1d4615(0x248)]({'function':_0x1d4615(0x1c3),'args':_0x191705});}else logger[_0x1d4615(0x1a6)](_0x1d4615(0x1bc));}),_0x5fd0b2['on'](_0x525d63(0x34e),(_0x779ea,_0xb18224)=>{const _0x9996cf=_0x525d63;if(validateAccess(_0xb18224,_0xcc7cfa)['allow']){if(pid[_0x279872])pid[_0x279872][_0x9996cf(0x248)]({'function':_0x9996cf(0x18d),'args':_0x779ea});}else logger[_0x9996cf(0x1a6)](_0x9996cf(0x2ac));}),_0x5fd0b2['on'](_0x525d63(0x28d),(_0x2ab260,_0x6ae1b7)=>{const _0x3d62ef=_0x525d63;if(validateAccess(_0x6ae1b7,_0xcc7cfa)['allow']){if(pid[_0x279872])pid[_0x279872][_0x3d62ef(0x248)]({'function':_0x3d62ef(0x2eb),'args':_0x2ab260});}else logger[_0x3d62ef(0x1a6)](_0x3d62ef(0x198));}),_0x5fd0b2['on'](_0x525d63(0x201),_0x4ec6c7=>{const _0x166050=_0x525d63;if(validateAccess(_0x4ec6c7,_0xcc7cfa)[_0x166050(0x347)]){if(pid[_0x279872])pid[_0x279872][_0x166050(0x248)]({'function':_0x166050(0x253),'args':null});}else logger[_0x166050(0x1a6)](_0x166050(0x23a));}),_0x5fd0b2['on'](_0x525d63(0x2a9),_0x580270=>{const _0x5bc9c9=_0x525d63;if(validateAccess(_0x580270,_0xcc7cfa)[_0x5bc9c9(0x347)]){if(pid[_0x279872])pid[_0x279872]['send']({'function':_0x5bc9c9(0x21c),'args':null});}else logger[_0x5bc9c9(0x1a6)](_0x5bc9c9(0x396));}),_0x5fd0b2['on'](_0x525d63(0x323),(_0x96ce62,_0x532ec6)=>{const _0x111c4a=_0x525d63;if(validateAccess(_0x532ec6,_0xcc7cfa)[_0x111c4a(0x347)]){if(pid[_0x279872])pid[_0x279872][_0x111c4a(0x248)]({'function':_0x111c4a(0x2f0),'args':_0x96ce62});}else logger['full'](_0x111c4a(0x1bd));}),_0x5fd0b2['on'](_0x525d63(0x258),_0x2f3867=>{const _0x49ce45=_0x525d63;if(validateAccess(_0x2f3867,_0xcc7cfa)[_0x49ce45(0x347)]){if(pid[_0x279872])pid[_0x279872][_0x49ce45(0x248)]({'function':'cancelLoading','args':null});}else logger[_0x49ce45(0x1a6)](_0x49ce45(0x1e6));}),_0x5fd0b2['on'](_0x525d63(0x2c1),_0x2b9a33=>{const _0x4a7027=_0x525d63;if(validateAccess(_0x2b9a33,_0xcc7cfa)[_0x4a7027(0x347)]){if(pid[_0x279872])pid[_0x279872][_0x4a7027(0x248)]({'function':_0x4a7027(0x20e),'args':null});}else logger[_0x4a7027(0x1a6)]('Unauthorized\x20attempt\x20to\x20show\x20configuration');}),_0x5fd0b2['on'](_0x525d63(0x360),_0x139e58=>{const _0x59c86c=_0x525d63;if(validateAccess(_0x139e58,_0xcc7cfa)[_0x59c86c(0x347)])updateBB('update');else logger[_0x59c86c(0x1a6)](_0x59c86c(0x2f9));}),_0x5fd0b2['on'](_0x525d63(0x186),_0x340b68=>{const _0x22dbfe=_0x525d63;if(validateAccess(_0x340b68,_0xcc7cfa)[_0x22dbfe(0x347)])getMessages();else logger[_0x22dbfe(0x1a6)](_0x22dbfe(0x2ce));}),_0x5fd0b2['on'](_0x525d63(0x30d),(_0x53a4b9,_0x333864)=>{const _0x20a60b=_0x525d63;if(validateAccess(_0x333864,_0xcc7cfa)[_0x20a60b(0x347)])confirmMessage(_0x53a4b9);else logger['full'](_0x20a60b(0x3a6));}),_0x5fd0b2['on'](_0x525d63(0x236),_0x20b459=>{const _0x1f5a2c=_0x525d63;if(validateAccess(_0x20b459,_0xcc7cfa)[_0x1f5a2c(0x347)]){if(devices[_0xcc7cfa][_0x1f5a2c(0x30a)])clearTimeout(devices[_0xcc7cfa][_0x1f5a2c(0x30a)]);if(devices[_0xcc7cfa]['pidExpireLogin'])clearTimeout(devices[_0xcc7cfa][_0x1f5a2c(0x2ca)]);removeSocketListeners(getClient(_0x5fd0b2['id'])[_0x1f5a2c(0x268)]),addBlacklist(_0xcc7cfa),devices[_0xcc7cfa][_0x1f5a2c(0x2ba)]=null,devices[_0xcc7cfa][_0x1f5a2c(0x343)]=null,devices[_0xcc7cfa][_0x1f5a2c(0x27e)][_0x1f5a2c(0x1c5)]=null,logger[_0x1f5a2c(0x324)](_0x1f5a2c(0x1e5)+_0xcc7cfa['slice'](-0x8)),io['to'](getClient(_0x5fd0b2['id'])[_0x1f5a2c(0x268)])[_0x1f5a2c(0x33b)](_0x1f5a2c(0x300),{'access':{'allow':![],'reason':'logged\x20out','token':null}});}else logger[_0x1f5a2c(0x1a6)](_0x1f5a2c(0x21d));});}function removeSocketListeners(_0x43c212){const _0x59d633=_0x2bc9c3;getClientsWithUuid(_0x43c212)[_0x59d633(0x289)](_0x1bfc02=>{const _0x437863=_0x59d633;getSocket(_0x1bfc02['id'])[_0x437863(0x2fd)]();});}function cleanSettings(){const _0x2beacf=_0x2bc9c3;let _0x379091=settings;return settings['telegramToken']&&settings[_0x2beacf(0x308)]!=''&&(_0x379091={..._0x379091,'telegramToken':'************'}),settings[_0x2beacf(0x1ce)]&&settings[_0x2beacf(0x1ce)]!=''&&(_0x379091={..._0x379091,'bbPassword':_0x2beacf(0x328)}),settings['marketcapApi']&&settings[_0x2beacf(0x259)]!=''&&(_0x379091={..._0x379091,'marketcapApi':_0x2beacf(0x328)}),(settings[_0x2beacf(0x1ce)]&&settings[_0x2beacf(0x1ce)]=='***'||settings[_0x2beacf(0x308)]&&settings[_0x2beacf(0x308)]==_0x2beacf(0x19b)||settings['marketcapApi']&&settings[_0x2beacf(0x259)]==_0x2beacf(0x19b))&&(_0x379091={..._0x379091,'restored':{'password':settings[_0x2beacf(0x1ce)]==_0x2beacf(0x19b),'telegram':settings[_0x2beacf(0x308)]==_0x2beacf(0x19b),'marketcap':settings['marketcapApi']==_0x2beacf(0x19b)}}),_0x379091;}async function updateBB(_0x4bcc77){const _0x5d7a5c=_0x2bc9c3;await backupConfigFiles(),installingUpdate=!![],config['forEach'](_0x78c3fd=>{const _0x596bba=_0x4a19;restartBot(_0x78c3fd[_0x596bba(0x195)]);});if(_0x4bcc77==_0x5d7a5c(0x352))process['send']({'update':!![],'environment':environment},_0x178169=>{});else _0x4bcc77==_0x5d7a5c(0x21f)&&process[_0x5d7a5c(0x248)]({'reinstall':!![],'environment':environment},_0x10f66f=>{});}function startBot(_0x12746d,_0x11eb17,_0x1245cf){const _0x2ddb91=_0x2bc9c3;if(debugging)_0x12746d[_0x2ddb91(0x247)]('-d');if(recreate)_0x12746d[_0x2ddb91(0x247)]('-r');let _0x309629=![];const _0x4e485c=_0x12746d[0x0];_0x11eb17={..._0x11eb17,'stdio':[_0x2ddb91(0x28b),_0x2ddb91(0x28b),_0x2ddb91(0x28b),_0x2ddb91(0x1f8)]},pid[_0x4e485c]=childProcess[_0x2ddb91(0x2fe)](botfile,_0x12746d,_0x11eb17),pid[_0x4e485c]['on'](_0x2ddb91(0x2d4),_0x452d1d=>{const _0x1d71e4=_0x2ddb91;switch(Object[_0x1d71e4(0x35f)](_0x452d1d)[0x0]){case _0x1d71e4(0x2b2):updateBotName(_0x4e485c,_0x452d1d[_0x1d71e4(0x2b2)]);break;case'updatebotmanager':updateBotManager();break;case _0x1d71e4(0x300):updateStatus(_0x4e485c,_0x452d1d[_0x1d71e4(0x300)]);break;case _0x1d71e4(0x1ae):updateLive(_0x4e485c,_0x452d1d[_0x1d71e4(0x1ae)]);break;case _0x1d71e4(0x264):updateLive(_0x4e485c,_0x452d1d['started']),io['to'](_0x4e485c)[_0x1d71e4(0x33b)](_0x1d71e4(0x300),{'access':{'allow':![],'reason':_0x1d71e4(0x34f),'token':null}});break;case _0x1d71e4(0x327):_0x452d1d['stop']==_0x1d71e4(0x31b)&&restartBot(_0x4e485c);_0x452d1d[_0x1d71e4(0x327)]==_0x1d71e4(0x33d)&&toggleBot(_0x4e485c,_0x1d71e4(0x1b8),'stopped');break;case'telegram':sendTelegramBot(_0x4e485c,_0x452d1d[_0x1d71e4(0x22c)]);break;case'telegrammsg':sendTelegramMsg(_0x452d1d[_0x1d71e4(0x265)]);break;case _0x1d71e4(0x192):io['to'](_0x4e485c)['emit'](_0x452d1d['function'],_0x452d1d['args']);break;}}),pid[_0x4e485c]['on'](_0x2ddb91(0x1e0),function(_0x3d9690){if(_0x309629)return;_0x309629=!![],_0x1245cf(_0x3d9690);}),pid[_0x4e485c]['on'](_0x2ddb91(0x34a),async function(_0x13a58c){const _0x365aa1=_0x2ddb91;if(terminating)return;if(installingUpdate){io[_0x365aa1(0x361)]();return;}if(_0x309629)return;_0x309629=!![],_0x1245cf(null);const _0x495457=dbConfig[_0x365aa1(0x1ab)](_0x365aa1(0x2fc))[_0x365aa1(0x2a5)]({'botID':_0x4e485c})[_0x365aa1(0x1f9)]();_0x495457&&(_0x495457[_0x365aa1(0x300)]=='enabled'||_0x495457[_0x365aa1(0x300)]==_0x365aa1(0x269))&&(await sleep(0x3e8),updateLive(_0x4e485c,_0x365aa1(0x32a)),logger[_0x365aa1(0x1a6)](_0x365aa1(0x316)+botRef(_0x4e485c)),startBot([_0x4e485c,userID],{'cwd':bbpath},function(_0x39cc7c){const _0x463bad=_0x365aa1;if(_0x39cc7c)logger[_0x463bad(0x1a6)](_0x39cc7c);}));});}function stopBot(_0x4782cf){const _0x1240e6=_0x2bc9c3;getClientsWithBotID(_0x4782cf)[_0x1240e6(0x289)](_0x2719c5=>{const _0x575463=_0x1240e6;getSocket(_0x2719c5['id'])[_0x575463(0x390)](!![]),removeClient(_0x2719c5['id']);}),pid[_0x4782cf]&&(pid[_0x4782cf][_0x1240e6(0x33d)](),pid[_0x4782cf]=null);}function stopAllBots(){const _0x456d7e=_0x2bc9c3;terminating=!![];const _0x2d319a=getEnabledBots();_0x2d319a[_0x456d7e(0x289)](_0x442772=>{const _0x334ab3=_0x456d7e;stopBot(_0x442772[_0x334ab3(0x195)]);});}function restartBot(_0x36c174){if(pid[_0x36c174])pid[_0x36c174]['kill']();}function addBot(){const _0x1bb21f=_0x2bc9c3;let _0x5c1a4d;for(let _0x1e92d7=0x1;_0x1e92d7<0x3e9;_0x1e92d7++){_0x5c1a4d=_0x1e92d7[_0x1bb21f(0x304)]()['padStart'](0x3,'0');let _0x44f0b8=config[_0x1bb21f(0x2a5)](_0x4353d5=>_0x4353d5['botID']==_0x5c1a4d);if(!_0x44f0b8)break;}if(_0x5c1a4d===_0x1bb21f(0x339)){logger[_0x1bb21f(0x1a6)](_0x1bb21f(0x2ea));return;}logger['full'](_0x1bb21f(0x25f)+_0x5c1a4d),dbConfig[_0x1bb21f(0x1ab)](_0x1bb21f(0x2fc))[_0x1bb21f(0x247)]({'botID':_0x5c1a4d,'botname':'Bot\x20'+_0x5c1a4d,'status':_0x1bb21f(0x269),'live':''})['write'](),startBot([_0x5c1a4d,userID],{'cwd':bbpath},function(_0x44f15d){const _0x40ec10=_0x1bb21f;if(_0x44f15d)logger[_0x40ec10(0x1a6)](_0x44f15d);}),config=getConfiguration(),io['to']('botmanager')['emit'](_0x1bb21f(0x2fc),config),broadcastToBots(_0x1bb21f(0x2fc),JSON['stringify'](config));}function deleteBot(_0x2c831d){const _0x1a7f05=_0x2bc9c3;getClientsWithBotID(_0x2c831d)['forEach'](_0x2a15fd=>{const _0x3be26e=_0x4a19;getSocket(_0x2a15fd['id'])[_0x3be26e(0x390)](!![]),removeClient(_0x2a15fd['id']);}),dbConfig[_0x1a7f05(0x1ab)]('bots')[_0x1a7f05(0x2c6)]({'botID':_0x2c831d})[_0x1a7f05(0x1f7)](),logger[_0x1a7f05(0x1a6)]('Deleted\x20Bot\x20'+_0x2c831d),stopBot(_0x2c831d);try{if(fs['existsSync'](path['join'](configpath,_0x1a7f05(0x1a0)+_0x2c831d+_0x1a7f05(0x1ad))))fs['unlinkSync'](path[_0x1a7f05(0x356)](configpath,'bot-'+_0x2c831d+_0x1a7f05(0x1ad)));if(fs[_0x1a7f05(0x220)](path['join'](configpath,'bot-'+_0x2c831d+_0x1a7f05(0x2d9))))fs['unlinkSync'](path['join'](configpath,'bot-'+_0x2c831d+_0x1a7f05(0x2d9)));if(fs[_0x1a7f05(0x220)](path[_0x1a7f05(0x356)](configpath,_0x1a7f05(0x1a0)+_0x2c831d+_0x1a7f05(0x273))))fs['unlinkSync'](path[_0x1a7f05(0x356)](configpath,_0x1a7f05(0x1a0)+_0x2c831d+_0x1a7f05(0x273)));if(fs[_0x1a7f05(0x220)](path[_0x1a7f05(0x356)](configpath,_0x1a7f05(0x1a0)+_0x2c831d+'-results.json')))fs[_0x1a7f05(0x278)](path[_0x1a7f05(0x356)](configpath,_0x1a7f05(0x1a0)+_0x2c831d+_0x1a7f05(0x2c2)));}catch(_0xe794c5){if(_0xe794c5)logger[_0x1a7f05(0x1a6)](_0x1a7f05(0x235),_0xe794c5);}config=getConfiguration(),io['to']('botmanager')[_0x1a7f05(0x33b)](_0x1a7f05(0x2fc),config),broadcastToBots('bots',JSON['stringify'](config));}function toggleBot(_0x10748e,_0x3ced77,_0x4e7ca5){const _0x5ba4b4=_0x2bc9c3;dbConfig[_0x5ba4b4(0x1ab)](_0x5ba4b4(0x2fc))['find']({'botID':_0x10748e})['assign']({'status':_0x3ced77})['assign']({'live':_0x4e7ca5})[_0x5ba4b4(0x1f7)]();const _0x4e1bdf=botRef(_0x10748e);if(_0x3ced77==_0x5ba4b4(0x1ef)||_0x3ced77==_0x5ba4b4(0x269))logger['full'](_0x5ba4b4(0x2d2)+_0x4e1bdf),startBot([_0x10748e,userID],{'cwd':bbpath},function(_0x766c42){const _0x2230c3=_0x5ba4b4;if(_0x766c42)logger[_0x2230c3(0x1a6)](_0x766c42);});else(_0x3ced77=='disabled'||_0x3ced77=='new-disabled')&&(logger[_0x5ba4b4(0x1a6)](_0x5ba4b4(0x1cc)+_0x4e1bdf),stopBot(_0x10748e));config=getConfiguration(),io['to'](_0x5ba4b4(0x29e))[_0x5ba4b4(0x33b)](_0x5ba4b4(0x2fc),config),broadcastToBots(_0x5ba4b4(0x2fc),JSON[_0x5ba4b4(0x1e8)](config));}function toggleStatus(_0x3298de){const _0x3e37c6=_0x2bc9c3;let _0x25af8d=dbConfig[_0x3e37c6(0x1ab)](_0x3e37c6(0x2fc))['find']({'botID':_0x3298de})[_0x3e37c6(0x1f9)](),_0x4a7e5e;if(_0x25af8d[_0x3e37c6(0x300)]==='enabled')_0x4a7e5e=_0x3e37c6(0x1b8);else{if(_0x25af8d['status']===_0x3e37c6(0x269))_0x4a7e5e=_0x3e37c6(0x1de);else{if(_0x25af8d[_0x3e37c6(0x300)]==='new-disabled')_0x4a7e5e=_0x3e37c6(0x269);else{if(_0x25af8d['status']===_0x3e37c6(0x1b8))_0x4a7e5e='enabled';}}}return _0x4a7e5e;}function updateStatus(_0x346e27,_0x20559f){const _0x4d34d0=_0x2bc9c3;dbConfig[_0x4d34d0(0x1ab)]('bots')[_0x4d34d0(0x2a5)]({'botID':_0x346e27})[_0x4d34d0(0x194)]({'status':_0x20559f})[_0x4d34d0(0x1f7)](),config=getConfiguration(),io['to']('botmanager')[_0x4d34d0(0x33b)](_0x4d34d0(0x2fc),config),broadcastToBots('bots',JSON[_0x4d34d0(0x1e8)](config));}function updateLive(_0x2aa947,_0x54e15b){const _0x4a1bb2=_0x2bc9c3;dbConfig['get'](_0x4a1bb2(0x2fc))['find']({'botID':_0x2aa947})['assign']({'live':_0x54e15b})[_0x4a1bb2(0x1f7)](),config=getConfiguration(),io['to'](_0x4a1bb2(0x29e))['emit'](_0x4a1bb2(0x2fc),config),broadcastToBots(_0x4a1bb2(0x2fc),JSON[_0x4a1bb2(0x1e8)](config));}function updateBotName(_0x5bb5f0,_0x35d517){const _0x4b11f0=_0x2bc9c3;dbConfig['get'](_0x4b11f0(0x2fc))[_0x4b11f0(0x2a5)]({'botID':_0x5bb5f0})[_0x4b11f0(0x194)]({'botname':_0x35d517})['write'](),config=getConfiguration(),io['to'](_0x4b11f0(0x29e))['emit'](_0x4b11f0(0x2fc),config),broadcastToBots(_0x4b11f0(0x2fc),JSON['stringify'](config));}function updateBotManager(){const _0x421cfc=_0x2bc9c3;config=getConfiguration(),io['to']('botmanager')['emit'](_0x421cfc(0x2fc),config),broadcastToBots('bots',JSON[_0x421cfc(0x1e8)](config));}function toggleBotMode(_0x33ebe9){const _0x344a3a=_0x2bc9c3;if(pid[_0x33ebe9])pid[_0x33ebe9][_0x344a3a(0x248)]({'function':'toggleBotMode','args':null});else{const _0x2e01c4=configpath+_0x344a3a(0x1a0)+_0x33ebe9+_0x344a3a(0x1ad),_0x23a9b3=fs[_0x344a3a(0x387)](_0x2e01c4),_0x1dddd0=JSON[_0x344a3a(0x22b)](_0x23a9b3),_0x38bb22=_0x1dddd0['bot'][0x0][_0x344a3a(0x1cf)];_0x1dddd0[_0x344a3a(0x33e)][0x0][_0x344a3a(0x1cf)]=!_0x38bb22;const _0xa4ab92=JSON[_0x344a3a(0x1e8)](_0x1dddd0,null,0x2);fs['writeFileSync'](_0x2e01c4,_0xa4ab92),config=getConfiguration(),io['to']('botmanager')[_0x344a3a(0x33b)]('bots',config),broadcastToBots(_0x344a3a(0x2fc),JSON[_0x344a3a(0x1e8)](config));}}function validateTelegram(_0x1423ee){const _0x311544=_0x2bc9c3;if(_0x1423ee[_0x311544(0x36c)][_0x311544(0x1d4)]!=settings[_0x311544(0x212)]&&'@'+_0x1423ee['from'][_0x311544(0x1d4)]!=settings['telegramUsername']||_0x1423ee[_0x311544(0x380)]['id']!=settings[_0x311544(0x18f)])return sendTelegram(_0x1423ee['chat']['id'],'Unauthorized\x20user\x20-\x20make\x20sure\x20you\x27ve\x20entered\x20your\x20<b>personal</b>\x20Telegram\x20username\x20in\x20the\x20Bot\x20Manager\x27s\x20settings',{'parse_mode':_0x311544(0x270)}),![];return!![];}function botRef(_0x431850){const _0x232d28=_0x2bc9c3,_0x5dd46c=getBotAttributes(_0x431850),_0x3ae512=_0x5dd46c['showname']?_0x5dd46c[_0x232d28(0x2b2)]:'Bot\x20'+_0x431850;return _0x3ae512;}async function initTelegram(){const _0x2217e8=_0x2bc9c3;tgBot&&(await tgBot[_0x2217e8(0x327)](),await sleep(0x7d0));tgBot=new Telegraf(settings['telegramToken']);let _0x10aa65=_0x2217e8(0x243);_0x10aa65+='\x0a',_0x10aa65+=_0x2217e8(0x23c),_0x10aa65+=_0x2217e8(0x37d),_0x10aa65+=_0x2217e8(0x27d),_0x10aa65+='/restart\x20-\x20restart\x20bot(s)\x0a',_0x10aa65+=_0x2217e8(0x20d),_0x10aa65+=_0x2217e8(0x1a3),_0x10aa65+=_0x2217e8(0x26b),_0x10aa65+=_0x2217e8(0x312),_0x10aa65+=_0x2217e8(0x313),_0x10aa65+='/metrics\x20-\x20show\x20bot\x20performance\x0a',_0x10aa65+=_0x2217e8(0x19f),_0x10aa65+=_0x2217e8(0x38a),_0x10aa65+='/backup\x20-\x20receive\x20backup\x20files\x0a',_0x10aa65+='/update\x20-\x20update\x20Balance\x20Bot\x0a',_0x10aa65+=_0x2217e8(0x1be),_0x10aa65+=_0x2217e8(0x3a7);let _0x295fad=_0x2217e8(0x301);_0x295fad+='\x0a',_0x295fad+=_0x10aa65,tgBot[_0x2217e8(0x25a)]((_0x43c2f8,_0x4b359c)=>{const _0x25933d=_0x2217e8;logger[_0x25933d(0x286)](getTimeStamp()+_0x25933d(0x377)),logger[_0x25933d(0x324)]('Telegraf\x20error:',_0x43c2f8);}),tgBot[_0x2217e8(0x3aa)](async(_0x344f64,_0x12819e)=>{const _0xac672c=_0x2217e8;if(settings[_0xac672c(0x18f)]||_0x344f64[_0xac672c(0x352)][_0xac672c(0x2d4)][_0xac672c(0x32d)]!=_0xac672c(0x19d)){if(!validateTelegram(_0x344f64))return;}_0x12819e();}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x226),async _0x357211=>{const _0x382622=_0x2217e8;if(_0x357211[_0x382622(0x36c)]['username']==settings[_0x382622(0x212)]||'@'+_0x357211[_0x382622(0x36c)][_0x382622(0x1d4)]==settings[_0x382622(0x212)]){if(!settings[_0x382622(0x18f)])updateSetting(_0x382622(0x18f),_0x357211[_0x382622(0x380)]['id']);else{if(!validateTelegram(_0x357211))return;}}else{if(!validateTelegram(_0x357211))return;}updateSetting(_0x382622(0x366),!![]),await sendTelegram(_0x357211['chat']['id'],_0x295fad);}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x364),async _0xf3be36=>{const _0x1c69d8=_0x2217e8;updateSetting('telegramEnabled',!![]),await sendTelegram(_0xf3be36[_0x1c69d8(0x380)]['id'],_0x1c69d8(0x36e));}),tgBot['command'](_0x2217e8(0x2d1),async _0x15d184=>{const _0x8a9083=_0x2217e8;await sendTelegram(_0x15d184[_0x8a9083(0x380)]['id'],_0x8a9083(0x261)),updateSetting(_0x8a9083(0x366),![]);}),tgBot['command'](_0x2217e8(0x274),async _0x4c5076=>{const _0x29269e=_0x2217e8,_0x2c5d44=Markup[_0x29269e(0x2cb)]([Markup[_0x29269e(0x281)][_0x29269e(0x297)]('Orders',_0x29269e(0x382)),Markup['button'][_0x29269e(0x297)]('Alerts',_0x29269e(0x1e3)),Markup[_0x29269e(0x281)][_0x29269e(0x297)](_0x29269e(0x20a),_0x29269e(0x2e0))]);_0x4c5076[_0x29269e(0x338)](_0x29269e(0x240),_0x2c5d44);}),tgBot[_0x2217e8(0x238)]('config_orders',async _0x4cb6f5=>{const _0x184ed5=_0x2217e8;_0x4cb6f5[_0x184ed5(0x322)](),updateSetting(_0x184ed5(0x199),'orders'),updateSetting(_0x184ed5(0x366),!![]),await sendTelegram(_0x4cb6f5[_0x184ed5(0x380)]['id'],_0x184ed5(0x22a));}),tgBot[_0x2217e8(0x238)]('config_alerts',async _0x43eadf=>{const _0x2c4c27=_0x2217e8;_0x43eadf[_0x2c4c27(0x322)](),updateSetting(_0x2c4c27(0x199),_0x2c4c27(0x2a3)),updateSetting(_0x2c4c27(0x366),!![]),await sendTelegram(_0x43eadf[_0x2c4c27(0x380)]['id'],_0x2c4c27(0x398));}),tgBot['action'](_0x2217e8(0x2e0),async _0x4c8b34=>{const _0x361a9a=_0x2217e8;_0x4c8b34[_0x361a9a(0x322)](),updateSetting('telegramEvents',_0x361a9a(0x284)),updateSetting(_0x361a9a(0x366),!![]),await sendTelegram(_0x4c8b34[_0x361a9a(0x380)]['id'],_0x361a9a(0x22d));}),tgBot['command'](_0x2217e8(0x300),async _0x5c4d0d=>{const _0x5a7930=_0x2217e8,_0x42f4c8=getBotsWithMode();let _0x13858b='<b>Balance\x20Bot\x20Status:</b>\x0a';config['forEach'](_0x2ec37f=>{const _0x5f37fb=_0x4a19,_0x5d2a9c=_0x42f4c8[_0x5f37fb(0x2a5)](_0x4dd41b=>_0x4dd41b[_0x5f37fb(0x195)]==_0x2ec37f['botID'])[_0x5f37fb(0x224)];_0x13858b+='Bot\x20'+_0x2ec37f[_0x5f37fb(0x195)]+':\x20'+_0x2ec37f[_0x5f37fb(0x300)]+_0x5f37fb(0x2b5)+_0x5d2a9c+_0x5f37fb(0x2b5)+_0x2ec37f[_0x5f37fb(0x1ae)]+'\x0a';}),_0x13858b+='\x0a',_0x13858b+=_0x5a7930(0x20f),_0x13858b+=!settings[_0x5a7930(0x366)]?'Notifications\x20disabled\x0a':'Notifications\x20enabled\x0a',_0x13858b+=settings[_0x5a7930(0x366)]?settings[_0x5a7930(0x199)]=='all'?_0x5a7930(0x298):'Notifications\x20types:\x20'+settings[_0x5a7930(0x199)]+_0x5a7930(0x306):'',await sendTelegram(_0x5c4d0d['chat']['id'],_0x13858b,{'parse_mode':'HTML'});}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x31b),async _0x16906e=>{const _0x162843=_0x2217e8,_0x2da183=getEnabledBots();if(_0x2da183['length']==0x0)await sendTelegram(_0x16906e['chat']['id'],_0x162843(0x35a));else{if(_0x2da183[_0x162843(0x213)]>0x1)_0x2da183['push']({'botID':'all'});let _0x2efbac=[],_0x11b7df=[];const _0xafd1d1=_0x2da183[_0x162843(0x213)]%0x4==0x0||_0x2da183['length']%0x4==0x3||_0x2da183[_0x162843(0x213)]%0x3==0x1?0x4:0x3;let _0x24dff0=0x0;_0x2da183[_0x162843(0x289)]((_0x15c184,_0xe0175c)=>{const _0x5106e4=_0x162843;if(_0xe0175c%_0xafd1d1==0x0)_0x11b7df=[];_0x11b7df[_0x5106e4(0x247)](Markup[_0x5106e4(0x281)]['callback'](_0x15c184[_0x5106e4(0x195)]==_0x5106e4(0x284)?'All\x20bots':botRef(_0x15c184[_0x5106e4(0x195)]),_0x5106e4(0x234)+_0x15c184['botID'])),_0xe0175c%_0xafd1d1==0x0&&(_0x2efbac[_0x24dff0]=_0x11b7df,_0x24dff0++);});const _0x4886eb=Markup[_0x162843(0x2cb)](_0x2efbac);_0x16906e[_0x162843(0x338)](_0x162843(0x2b8),_0x4886eb);}}),tgBot[_0x2217e8(0x238)](/restart_(.+)/,async _0x6f970b=>{const _0x303cd9=_0x2217e8,_0x28529a=_0x6f970b[_0x303cd9(0x1bf)][0x1];_0x6f970b[_0x303cd9(0x322)](),_0x28529a==_0x303cd9(0x284)?config[_0x303cd9(0x289)](_0x28eb87=>{const _0x1fec11=_0x303cd9;restartBot(_0x28eb87[_0x1fec11(0x195)]);}):restartBot(_0x28529a);}),tgBot[_0x2217e8(0x1a7)]('on',async _0x2813d6=>{const _0x291ad5=_0x2217e8,_0x25fe94=getDisabledBots();if(_0x25fe94[_0x291ad5(0x213)]==0x0)await sendTelegram(_0x2813d6[_0x291ad5(0x380)]['id'],_0x291ad5(0x293));else{if(_0x25fe94[_0x291ad5(0x213)]>0x1)_0x25fe94[_0x291ad5(0x247)]({'botID':'all'});let _0x3da2f4=[],_0x209c0a=[];const _0x2ef744=_0x25fe94['length']%0x4==0x0||_0x25fe94[_0x291ad5(0x213)]%0x4==0x3||_0x25fe94['length']%0x3==0x1?0x4:0x3;let _0x774ca4=0x0;_0x25fe94['forEach']((_0x4e6f41,_0x3cb3d0)=>{const _0x3b4532=_0x291ad5;if(_0x3cb3d0%_0x2ef744==0x0)_0x209c0a=[];_0x209c0a['push'](Markup[_0x3b4532(0x281)][_0x3b4532(0x297)](_0x4e6f41[_0x3b4532(0x195)]==_0x3b4532(0x284)?_0x3b4532(0x39f):botRef(_0x4e6f41[_0x3b4532(0x195)]),'on_'+_0x4e6f41[_0x3b4532(0x195)])),_0x3cb3d0%_0x2ef744==0x0&&(_0x3da2f4[_0x774ca4]=_0x209c0a,_0x774ca4++);});const _0x5299e3=Markup[_0x291ad5(0x2cb)](_0x3da2f4);_0x2813d6['reply'](_0x291ad5(0x37e),_0x5299e3);}}),tgBot[_0x2217e8(0x238)](/on_(.+)/,async _0x417ec0=>{const _0x48a532=_0x2217e8,_0x471e49=_0x417ec0['match'][0x1];_0x417ec0[_0x48a532(0x322)]();if(_0x471e49=='all'){const _0x9e6224=getDisabledBots();await sendTelegram(_0x417ec0[_0x48a532(0x380)]['id'],'Bot\x20Mgr\x20>\x20Starting\x20all\x20bots'),_0x9e6224['forEach'](_0x2631ff=>{const _0x30448e=_0x48a532;if(_0x2631ff[_0x30448e(0x195)]!=_0x30448e(0x284))toggleBot(_0x2631ff[_0x30448e(0x195)],toggleStatus(_0x2631ff[_0x30448e(0x195)]),'stopped');});}else await sendTelegram(_0x417ec0[_0x48a532(0x380)]['id'],_0x48a532(0x38d)+botRef(_0x471e49)),toggleBot(_0x471e49,toggleStatus(_0x471e49),_0x48a532(0x32a));}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x295),async _0x2bc95f=>{const _0x54cfb1=_0x2217e8,_0x54c6d3=getEnabledBots();if(_0x54c6d3[_0x54cfb1(0x213)]==0x0)await sendTelegram(_0x2bc95f[_0x54cfb1(0x380)]['id'],_0x54cfb1(0x35a));else{if(_0x54c6d3[_0x54cfb1(0x213)]>0x1)_0x54c6d3[_0x54cfb1(0x247)]({'botID':'all'});let _0x29710f=[],_0x4f0024=[];const _0x4355ea=_0x54c6d3['length']%0x4==0x0||_0x54c6d3[_0x54cfb1(0x213)]%0x4==0x3||_0x54c6d3['length']%0x3==0x1?0x4:0x3;let _0x4ac728=0x0;_0x54c6d3[_0x54cfb1(0x289)]((_0x4d804c,_0x4a1564)=>{const _0x4fff5f=_0x54cfb1;if(_0x4a1564%_0x4355ea==0x0)_0x4f0024=[];_0x4f0024[_0x4fff5f(0x247)](Markup[_0x4fff5f(0x281)][_0x4fff5f(0x297)](_0x4d804c[_0x4fff5f(0x195)]=='all'?'All\x20bots':botRef(_0x4d804c[_0x4fff5f(0x195)]),'off_'+_0x4d804c[_0x4fff5f(0x195)])),_0x4a1564%_0x4355ea==0x0&&(_0x29710f[_0x4ac728]=_0x4f0024,_0x4ac728++);});const _0x5bc6f9=Markup[_0x54cfb1(0x2cb)](_0x29710f);_0x2bc95f[_0x54cfb1(0x338)](_0x54cfb1(0x266),_0x5bc6f9);}}),tgBot[_0x2217e8(0x238)](/off_(.+)/,async _0x14c132=>{const _0x1494eb=_0x2217e8,_0x27d6c8=_0x14c132['match'][0x1];_0x14c132[_0x1494eb(0x322)]();if(_0x27d6c8=='all'){const _0x39343b=getEnabledBots();await sendTelegram(_0x14c132[_0x1494eb(0x380)]['id'],_0x1494eb(0x2ef)),_0x39343b[_0x1494eb(0x289)](_0x4e46ed=>{const _0x301aa6=_0x1494eb;if(_0x4e46ed[_0x301aa6(0x195)]!='all')toggleBot(_0x4e46ed[_0x301aa6(0x195)],toggleStatus(_0x4e46ed['botID']),_0x301aa6(0x32a));});}else await sendTelegram(_0x14c132[_0x1494eb(0x380)]['id'],_0x1494eb(0x2c8)+botRef(_0x27d6c8)),toggleBot(_0x27d6c8,toggleStatus(_0x27d6c8),_0x1494eb(0x32a));}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x2ed),async _0x4c65a6=>{const _0x470098=_0x2217e8,_0x52ef1c=getEnabledBots();if(_0x52ef1c[_0x470098(0x213)]==0x0)await sendTelegram(_0x4c65a6[_0x470098(0x380)]['id'],'No\x20bots\x20running\x20right\x20now');else{if(_0x52ef1c[_0x470098(0x213)]>0x1){let _0x2ae2fc=[],_0x43b2b9=[];const _0xfe7363=_0x52ef1c[_0x470098(0x213)]%0x4==0x0||_0x52ef1c[_0x470098(0x213)]%0x4==0x3||_0x52ef1c[_0x470098(0x213)]%0x3==0x1?0x4:0x3;let _0x50fe31=0x0;_0x52ef1c[_0x470098(0x289)]((_0x4e1907,_0x3e2e37)=>{const _0x18249f=_0x470098;if(_0x3e2e37%_0xfe7363==0x0)_0x43b2b9=[];_0x43b2b9[_0x18249f(0x247)](Markup[_0x18249f(0x281)][_0x18249f(0x297)](botRef(_0x4e1907[_0x18249f(0x195)]),_0x18249f(0x211)+_0x4e1907['botID'])),_0x3e2e37%_0xfe7363==0x0&&(_0x2ae2fc[_0x50fe31]=_0x43b2b9,_0x50fe31++);});const _0x1e2e7f=Markup[_0x470098(0x2cb)](_0x2ae2fc);_0x4c65a6['reply'](_0x470098(0x1c8),_0x1e2e7f);}else{const _0x5146ac=_0x52ef1c[0x0][_0x470098(0x195)];if(pid[_0x5146ac])pid[_0x5146ac][_0x470098(0x248)]({'function':_0x470098(0x27f),'args':null});}}}),tgBot['action'](/metrics_(.+)/,async _0xb1389=>{const _0x4d1fb7=_0x2217e8,_0x20193d=_0xb1389[_0x4d1fb7(0x1bf)][0x1];_0xb1389[_0x4d1fb7(0x322)]();if(pid[_0x20193d])pid[_0x20193d][_0x4d1fb7(0x248)]({'function':_0x4d1fb7(0x27f),'args':null});}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x394),async _0x5f1335=>{const _0x2a0a62=_0x2217e8,_0x5abd25=getEnabledBots();if(_0x5abd25['length']==0x0)await sendTelegram(_0x5f1335[_0x2a0a62(0x380)]['id'],_0x2a0a62(0x35a));else{if(_0x5abd25[_0x2a0a62(0x213)]>0x1){let _0x51543b=[],_0x4f2db2=[];const _0x48f48d=_0x5abd25[_0x2a0a62(0x213)]%0x4==0x0||_0x5abd25[_0x2a0a62(0x213)]%0x4==0x3||_0x5abd25[_0x2a0a62(0x213)]%0x3==0x1?0x4:0x3;let _0x336c7e=0x0;_0x5abd25[_0x2a0a62(0x289)]((_0x107f72,_0x4d9978)=>{const _0x2cc386=_0x2a0a62;if(_0x4d9978%_0x48f48d==0x0)_0x4f2db2=[];_0x4f2db2[_0x2cc386(0x247)](Markup[_0x2cc386(0x281)][_0x2cc386(0x297)](botRef(_0x107f72[_0x2cc386(0x195)]),_0x2cc386(0x28c)+_0x107f72[_0x2cc386(0x195)])),_0x4d9978%_0x48f48d==0x0&&(_0x51543b[_0x336c7e]=_0x4f2db2,_0x336c7e++);});const _0x2436e9=Markup[_0x2a0a62(0x2cb)](_0x51543b);_0x5f1335['reply']('For\x20which\x20bot\x20do\x20you\x20want\x20the\x20portfolio?',_0x2436e9);}else{const _0x2c8c14=_0x5abd25[0x0][_0x2a0a62(0x195)];if(pid[_0x2c8c14])pid[_0x2c8c14][_0x2a0a62(0x248)]({'function':'sendPortfolioTelegram','args':null});}}}),tgBot[_0x2217e8(0x238)](/portfolio_(.+)/,async _0x329807=>{const _0x47d7ae=_0x2217e8,_0x27b7b9=_0x329807[_0x47d7ae(0x1bf)][0x1];_0x329807['editMessageReplyMarkup']();if(pid[_0x27b7b9])pid[_0x27b7b9][_0x47d7ae(0x248)]({'function':_0x47d7ae(0x374),'args':null});}),tgBot[_0x2217e8(0x1a7)]('logs',async _0x25320a=>{const _0x414d1b=_0x2217e8,_0x29e6e1='logs';await zipFiles(_0x29e6e1);const _0x1d6ffe=zippath+(_0x29e6e1+'.zip');_0x25320a[_0x414d1b(0x28a)]({'source':_0x1d6ffe})[_0x414d1b(0x37a)](()=>{})[_0x414d1b(0x25a)](_0x40a339=>logger[_0x414d1b(0x324)](_0x414d1b(0x2d8)+_0x29e6e1+_0x414d1b(0x21a),_0x40a339));}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x1fd),async _0x1a6770=>{const _0x577e38=_0x2217e8,_0x503046=_0x577e38(0x1fd);await backupConfigFiles(),await zipFiles(_0x503046);const _0x18ba49=zippath+(_0x503046+'.zip');_0x1a6770[_0x577e38(0x28a)]({'source':_0x18ba49})[_0x577e38(0x37a)](()=>{})[_0x577e38(0x25a)](_0x196dde=>logger['debug'](_0x577e38(0x2d8)+_0x503046+_0x577e38(0x21a),_0x196dde));}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x352),async _0xaa96bb=>{const _0x2117b0=_0x2217e8;await getMessages();if(!updateAvailable)await sendTelegram(_0xaa96bb[_0x2117b0(0x380)]['id'],'Your\x20installation\x20is\x20already\x20up\x20to\x20date');else{if(!validInstallation)await sendTelegram(_0xaa96bb[_0x2117b0(0x380)]['id'],_0x2117b0(0x29c));else{const _0x3ad135=Markup[_0x2117b0(0x2cb)]([Markup[_0x2117b0(0x281)][_0x2117b0(0x297)](_0x2117b0(0x365),'update_yes'),Markup[_0x2117b0(0x281)]['callback']('No',_0x2117b0(0x242))]);_0xaa96bb[_0x2117b0(0x338)](_0x2117b0(0x3a8),_0x3ad135);}}}),tgBot[_0x2217e8(0x238)](/update_(.+)/,async _0x3e6086=>{const _0x274a39=_0x2217e8,_0x35c8c3=_0x3e6086[_0x274a39(0x1bf)][0x1];_0x3e6086['editMessageReplyMarkup'](),_0x35c8c3=='yes'&&(await sendTelegram(_0x3e6086['chat']['id'],'Starting\x20Balance\x20Bot\x20update'),updateBB(_0x274a39(0x352))),_0x35c8c3=='no'&&await sendTelegram(_0x3e6086[_0x274a39(0x380)]['id'],_0x274a39(0x1dc));}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x21f),async _0x2a475e=>{const _0x697479=_0x2217e8;if(!validInstallation)await sendTelegram(_0x2a475e[_0x697479(0x380)]['id'],_0x697479(0x2f7));else{const _0xd267c6=Markup[_0x697479(0x2cb)]([Markup[_0x697479(0x281)][_0x697479(0x297)]('Yes',_0x697479(0x200)),Markup['button']['callback']('No',_0x697479(0x203))]);_0x2a475e[_0x697479(0x338)](_0x697479(0x395),_0xd267c6);}}),tgBot[_0x2217e8(0x238)](/reinstall_(.+)/,async _0x243c13=>{const _0x50f280=_0x2217e8,_0x538b1d=_0x243c13['match'][0x1];_0x243c13[_0x50f280(0x322)](),_0x538b1d=='yes'&&(await sendTelegram(_0x243c13[_0x50f280(0x380)]['id'],_0x50f280(0x223)),updateBB('reinstall')),_0x538b1d=='no'&&await sendTelegram(_0x243c13[_0x50f280(0x380)]['id'],_0x50f280(0x225));}),tgBot[_0x2217e8(0x1a7)](_0x2217e8(0x2a0),async _0x498505=>{const _0x369c06=_0x2217e8,_0xd1c863=getBotsWithMode();if(_0xd1c863[_0x369c06(0x213)]==0x0)await sendTelegram(_0x498505[_0x369c06(0x380)]['id'],'No\x20bots\x20running\x20right\x20now');else{let _0xb583ec=[],_0x47d6e1=[];const _0x3d16d2=0x2;let _0xfb394d=0x0;_0xd1c863[_0x369c06(0x289)]((_0x4e658a,_0x19f95a)=>{const _0x11e38e=_0x369c06;if(_0x19f95a%_0x3d16d2==0x0)_0x47d6e1=[];_0x47d6e1[_0x11e38e(0x247)](Markup['button'][_0x11e38e(0x297)](botRef(_0x4e658a['botID'])+'\x20('+_0x4e658a[_0x11e38e(0x224)]+')',_0x11e38e(0x24c)+_0x4e658a[_0x11e38e(0x195)])),_0x19f95a%_0x3d16d2==0x0&&(_0xb583ec[_0xfb394d]=_0x47d6e1,_0xfb394d++);});const _0x47de22=Markup['inlineKeyboard'](_0xb583ec);_0x498505[_0x369c06(0x338)](_0x369c06(0x231),_0x47de22);}}),tgBot['action'](/toggle_(.+)/,async _0x2b2894=>{const _0x500bfa=_0x2217e8,_0x2353b9=_0x2b2894['match'][0x1];_0x2b2894[_0x500bfa(0x322)]();const _0x2b99c1=getBotsWithMode(),_0x58a51a=_0x2b99c1['find'](_0x14839e=>_0x14839e[_0x500bfa(0x195)]==_0x2353b9),_0x3d1f1d=_0x58a51a['mode']==_0x500bfa(0x2d3)?_0x500bfa(0x2df):'auto';await sendTelegram(_0x2b2894[_0x500bfa(0x380)]['id'],_0x500bfa(0x2a7)+botRef(_0x58a51a['botID'])+_0x500bfa(0x296)+_0x3d1f1d+_0x500bfa(0x209)),toggleBotMode(_0x2353b9);}),tgBot['command'](_0x2217e8(0x294),async _0x95d58d=>{const _0x5e78c8=_0x2217e8;let _0xaa9c14='';config[_0x5e78c8(0x289)](_0x1fad14=>{const _0x3cbe89=_0x5e78c8;_0xaa9c14+=_0x3cbe89(0x3a1)+_0x1fad14[_0x3cbe89(0x195)]+':\x20'+_0x1fad14[_0x3cbe89(0x2b2)]+'\x0a';}),await sendTelegram(_0x95d58d[_0x5e78c8(0x380)]['id'],_0xaa9c14,{'parse_mode':'HTML'});}),tgBot['command'](_0x2217e8(0x2af),async _0x3f9acc=>{const _0x302520=_0x2217e8;await sendTelegram(_0x3f9acc[_0x302520(0x380)]['id'],_0x10aa65);}),process['once'](_0x2217e8(0x262),()=>tgBot[_0x2217e8(0x327)]('SIGINT')),process['once'](_0x2217e8(0x357),()=>tgBot[_0x2217e8(0x327)](_0x2217e8(0x357))),tgBot[_0x2217e8(0x25e)]();}function disableTelegram(){const _0x18ffcf=_0x2bc9c3;tgBot&&tgBot[_0x18ffcf(0x327)]();}async function sendTelegram(_0x4ebdac,_0x3bacd4,_0x165bd5){const _0x1dcb0e=_0x2bc9c3;_0x165bd5={..._0x165bd5,'disable_web_page_preview':!![]};try{await tgBot[_0x1dcb0e(0x22c)]['sendMessage'](_0x4ebdac,_0x3bacd4,_0x165bd5);}catch(_0x26d040){logger[_0x1dcb0e(0x324)](_0x1dcb0e(0x2f3),_0x26d040);}}async function sendTelegramBot(_0x4049f0,_0x35b62c){const _0x2e6db2=_0x2bc9c3;if(settings[_0x2e6db2(0x366)]){if(settings[_0x2e6db2(0x199)]=='all'||(_0x35b62c[_0x2e6db2(0x39d)]=='error'||_0x35b62c['type']==_0x2e6db2(0x2e9)||_0x35b62c[_0x2e6db2(0x39d)]==_0x2e6db2(0x230))&&settings[_0x2e6db2(0x199)]==_0x2e6db2(0x2a3)||_0x35b62c['type']==_0x2e6db2(0x2b3)&&settings[_0x2e6db2(0x199)]==_0x2e6db2(0x376)){if(tgBot&&settings[_0x2e6db2(0x18f)]){if(_0x35b62c['showname'])await sendTelegram(settings[_0x2e6db2(0x18f)],_0x35b62c['botname']+'\x20>\x20'+_0x35b62c[_0x2e6db2(0x276)]);else await sendTelegram(settings[_0x2e6db2(0x18f)],_0x2e6db2(0x3a1)+_0x4049f0+_0x2e6db2(0x1b2)+_0x35b62c[_0x2e6db2(0x276)]);}}}}async function sendTelegramMsg(_0x8d1a4c,_0x57e952=_0x2bc9c3(0x270)){const _0x3419dc=_0x2bc9c3;return tgBot&&settings[_0x3419dc(0x18f)]?(await sendTelegram(settings[_0x3419dc(0x18f)],_0x8d1a4c,{'parse_mode':_0x57e952}),!![]):![];}function getDeviceWithIp(_0x48a4ed){const _0x52feb6=_0x2bc9c3;return devices[_0x52feb6(0x2a5)](_0x2e37a2=>_0x2e37a2['ip']===_0x48a4ed);}async function temporaryAccess2FA(_0x5131e1,_0x1b15c6){const _0x4a77ff=_0x2bc9c3;let _0x168e39=new Date(),_0x5c2b0d=![];if(lastIpApproval){if(_0x168e39-lastIpApproval<0x1388)_0x5c2b0d=!![];}lastIpApproval=new Date();if(_0x5c2b0d)return;if(tgBot&&settings[_0x4a77ff(0x18f)]){const _0x21f25a=uuidRandom();tmpStorage[_0x21f25a]={'uuid':_0x5131e1,'externalip':_0x1b15c6};const _0x34eb16=Markup[_0x4a77ff(0x2cb)]([Markup[_0x4a77ff(0x281)][_0x4a77ff(0x297)](_0x4a77ff(0x210),_0x4a77ff(0x1aa)+_0x21f25a),Markup[_0x4a77ff(0x281)][_0x4a77ff(0x297)](_0x4a77ff(0x2a6),_0x4a77ff(0x331)+_0x21f25a),Markup['button'][_0x4a77ff(0x297)](_0x4a77ff(0x2b0),'tempaccess_30_'+_0x21f25a),Markup['button'][_0x4a77ff(0x297)](_0x4a77ff(0x299),_0x4a77ff(0x355)+_0x21f25a)]);await sendTelegram(settings['telegramChatId'],_0x4a77ff(0x2ab)+normalizeIP(_0x1b15c6)[_0x4a77ff(0x1cb)]+'\x20?',_0x34eb16),tgBot[_0x4a77ff(0x238)](/tempaccess_(.+)_(.+)/,async _0x1df3fd=>{const _0xba7228=_0x4a77ff,_0x6530f6=_0x1df3fd[_0xba7228(0x1bf)][0x1],_0x4b5859=_0x1df3fd[_0xba7228(0x1bf)][0x2],{uuid:_0x9c769c,externalip:_0x2d31ff}=tmpStorage[_0x4b5859];delete tmpStorage[_0x4b5859],_0x1df3fd[_0xba7228(0x322)](),devices[_0x9c769c]['telegramIpApproval']={'clientip':_0x2d31ff,'timestamp':new Date()[_0xba7228(0x379)](),'expiry':_0x6530f6},_0x6530f6!=_0xba7228(0x299)?(await sendTelegram(_0x1df3fd[_0xba7228(0x380)]['id'],_0xba7228(0x389)+_0x6530f6+_0xba7228(0x2b9),{'parse_mode':_0xba7228(0x270)}),io['to'](_0x9c769c)['emit']('status',{'access':{'allow':![],'reason':_0xba7228(0x34f),'token':null}})):(await sendTelegram(_0x1df3fd[_0xba7228(0x380)]['id'],_0xba7228(0x2bc)),io['to'](_0x9c769c)['emit']('status',{'access':{'allow':![],'reason':_0xba7228(0x385),'token':null}}));});}}async function loginAccess2FA(_0x31d14e,_0x1b4f13){const _0x193b92=_0x2bc9c3;if(tgBot&&settings[_0x193b92(0x18f)]){const _0x5b96b0=uuidRandom();tmpStorage[_0x5b96b0]={'uuid':_0x31d14e,'externalip':_0x1b4f13};const _0x3d6141=Markup['inlineKeyboard']([Markup['button']['callback']('accept',_0x193b92(0x187)+loginExpiry+'_'+_0x5b96b0),Markup['button'][_0x193b92(0x297)]('reject','login2fa_reject_'+_0x5b96b0)]);await sendTelegram(settings[_0x193b92(0x18f)],'Allow\x20login\x20from\x20IP\x20address\x20'+normalizeIP(_0x1b4f13)['show']+'\x20?',_0x3d6141),tgBot[_0x193b92(0x238)](/login2fa_(.+)_(.+)/,async _0x56a294=>{const _0x599609=_0x193b92,_0x309d2f=_0x56a294[_0x599609(0x1bf)][0x1],_0x44bcc8=_0x56a294[_0x599609(0x1bf)][0x2],{uuid:_0x29b07b,externalip:_0x5ea518}=tmpStorage[_0x44bcc8];delete tmpStorage[_0x44bcc8],_0x56a294['editMessageReplyMarkup'](),devices[_0x29b07b]['telegram2FaApproval']={'clientip':_0x5ea518,'timestamp':new Date()[_0x599609(0x379)](),'expiry':_0x309d2f},_0x309d2f!=_0x599609(0x299)?(await sendTelegram(_0x56a294[_0x599609(0x380)]['id'],'Login\x20accepted',{'parse_mode':_0x599609(0x270)}),io['to'](_0x29b07b)['emit'](_0x599609(0x300),{'access':{'allow':![],'reason':'reload','token':null}})):(await sendTelegram(_0x56a294[_0x599609(0x380)]['id'],_0x599609(0x193)),io['to'](_0x29b07b)[_0x599609(0x33b)](_0x599609(0x300),{'access':{'allow':![],'reason':'2FA\x20login\x20rejected','token':null}}));});}}function getConfiguration(){return getBotsWithMode();}function getEnabledBots(){const _0x4f6781=_0x2bc9c3;return dbConfig[_0x4f6781(0x1ab)](_0x4f6781(0x2fc))[_0x4f6781(0x196)](_0x4f6781(0x195))['filter']({'status':_0x4f6781(0x1ef)})['value']()||[];}function getDisabledBots(){const _0x39a0b7=_0x2bc9c3;return dbConfig[_0x39a0b7(0x1ab)](_0x39a0b7(0x2fc))['sortBy'](_0x39a0b7(0x195))['filter']({'status':_0x39a0b7(0x1b8)})['value']()||[];}function getBotAttributes(_0x353216){const _0x2b1be7=_0x2bc9c3;let _0x516007={};const _0x4552d0=configpath+_0x2b1be7(0x1a0)+_0x353216+_0x2b1be7(0x1ad),_0xb665cb=fs[_0x2b1be7(0x220)](_0x4552d0);if(_0xb665cb){const _0x3aa300=fs['readFileSync'](_0x4552d0);try{const _0x120e5f=JSON['parse'](_0x3aa300),_0x3d129d=_0x120e5f?_0x120e5f[_0x2b1be7(0x33e)][0x0][_0x2b1be7(0x1cf)]:![];_0x516007[_0x2b1be7(0x224)]=_0x3d129d?_0x2b1be7(0x2d3):_0x2b1be7(0x2df),_0x516007[_0x2b1be7(0x2b2)]=_0x120e5f?_0x120e5f['bot'][0x0][_0x2b1be7(0x2b2)]:_0x2b1be7(0x3a1)+_0x353216,_0x516007[_0x2b1be7(0x272)]=_0x120e5f?_0x120e5f[_0x2b1be7(0x33e)][0x0][_0x2b1be7(0x272)]:![];}catch(_0x364f59){_0x516007[_0x2b1be7(0x224)]=_0x2b1be7(0x2df),_0x516007[_0x2b1be7(0x2b2)]='Bot\x20'+_0x353216,_0x516007['showname']=![];}}else _0x516007['mode']=_0x2b1be7(0x2df),_0x516007[_0x2b1be7(0x2b2)]=_0x2b1be7(0x3a1)+_0x353216,_0x516007['showname']=![];return _0x516007;}function getBotsWithMode(){const _0x1aef9e=_0x2bc9c3,_0x44c590=dbConfig[_0x1aef9e(0x1ab)](_0x1aef9e(0x2fc))[_0x1aef9e(0x196)](_0x1aef9e(0x195))['value']()||[];return _0x44c590[_0x1aef9e(0x289)](_0x22f4ed=>{const _0x1c6aaf=_0x1aef9e;let _0x5e1197=getBotAttributes(_0x22f4ed[_0x1c6aaf(0x195)]);_0x22f4ed[_0x1c6aaf(0x224)]=_0x5e1197[_0x1c6aaf(0x224)];}),_0x44c590;}function getBotExchanges(){const _0x1bb98b=_0x2bc9c3;let _0x58cf64=[];const _0x17b29f=dbConfig[_0x1bb98b(0x1ab)](_0x1bb98b(0x2fc))['sortBy'](_0x1bb98b(0x195))[_0x1bb98b(0x1f9)]()||[];_0x17b29f[_0x1bb98b(0x289)](_0x22b690=>{const _0x4b43ad=_0x1bb98b;if(_0x22b690[_0x4b43ad(0x300)]==_0x4b43ad(0x1ef)){const _0x112f91=configpath+'bot-'+_0x22b690[_0x4b43ad(0x195)]+_0x4b43ad(0x1ad),_0x2fb635=fs[_0x4b43ad(0x220)](_0x112f91);let _0x54d5d6;if(_0x2fb635){const _0x4e599e=fs['readFileSync'](_0x112f91);try{const _0x44e599=JSON[_0x4b43ad(0x22b)](_0x4e599e);_0x54d5d6=_0x44e599?_0x44e599['bot'][0x0][_0x4b43ad(0x239)]:null;}catch(_0xb1f9d2){}}if(_0x54d5d6)_0x58cf64['push'](_0x54d5d6);}});const _0x30d775=[...new Set(_0x58cf64)][_0x1bb98b(0x1f1)]();return _0x30d775;}async function initUser(){const _0x207984=_0x2bc9c3;if(!settings['userid']){const _0x29c0d9=uuidRandom();mixpanel[_0x207984(0x18e)](_0x29c0d9),updateSetting(_0x207984(0x34b),_0x29c0d9);}}async function initSecure(){const _0x1687e4=_0x2bc9c3;let _0x5e61bd=getSecure();if(!_0x5e61bd['hasOwnProperty'](_0x1687e4(0x32b))){let _0x586939=await generateKeys();_0x5e61bd[_0x1687e4(0x2de)]=_0x586939[_0x1687e4(0x2de)],_0x5e61bd[_0x1687e4(0x214)]=_0x586939[_0x1687e4(0x214)],_0x5e61bd[_0x1687e4(0x32b)]=crypto['randomBytes'](0x20)[_0x1687e4(0x304)](_0x1687e4(0x375));;storeSecure(_0x5e61bd);}}function getSettings(){const _0x56069a=_0x2bc9c3;return dbSettings['get'](_0x56069a(0x310))['value']()||{};}function getSecure(){const _0x5a056c=_0x2bc9c3;return dbSecure[_0x5a056c(0x1ab)](_0x5a056c(0x25d))[_0x5a056c(0x1f9)]()||{};}function getBlacklist(){const _0x2f1605=_0x2bc9c3;return dbSecure[_0x2f1605(0x1ab)](_0x2f1605(0x1c1))[_0x2f1605(0x1f9)]()||[];}function broadcastToBots(_0x294edd,_0x2d8661){const _0x262725=_0x2bc9c3;config[_0x262725(0x289)](_0x5b361c=>{const _0x4a7b85=_0x262725;if(_0x5b361c[_0x4a7b85(0x300)]=='enabled'&&_0x5b361c[_0x4a7b85(0x1ae)]=='running'||_0x5b361c[_0x4a7b85(0x300)]==_0x4a7b85(0x269)&&_0x5b361c[_0x4a7b85(0x1ae)]==_0x4a7b85(0x36a)){if(pid[_0x5b361c['botID']])pid[_0x5b361c['botID']][_0x4a7b85(0x248)]({[_0x294edd]:_0x2d8661});}});}async function storeSettings(_0x23fdde,_0x4a9e46=![]){const _0x3b9a0d=_0x2bc9c3;_0x23fdde={...settings,..._0x23fdde};if(_0x4a9e46&&_0x23fdde[_0x3b9a0d(0x1ce)]!=_0x3b9a0d(0x328)&&_0x23fdde[_0x3b9a0d(0x1ce)]!=_0x3b9a0d(0x19b)&&_0x23fdde[_0x3b9a0d(0x1ce)]!=''){const _0x1b7997=decryptRSA(secure['privateKey'],_0x23fdde[_0x3b9a0d(0x1ce)])[_0x3b9a0d(0x345)](_0x3b9a0d(0x2a2))[0x0],_0x354150=bcrypt[_0x3b9a0d(0x368)](_0x1b7997,saltRounds);_0x23fdde={..._0x23fdde,'bbPassword':_0x354150};}if(_0x4a9e46&&_0x23fdde[_0x3b9a0d(0x308)]!='************'&&_0x23fdde[_0x3b9a0d(0x308)]!=_0x3b9a0d(0x19b)&&_0x23fdde[_0x3b9a0d(0x308)]!=''){const _0x2a42cb=decryptRSA(secure[_0x3b9a0d(0x214)],_0x23fdde[_0x3b9a0d(0x308)])[_0x3b9a0d(0x345)](_0x3b9a0d(0x2a2))[0x0];_0x23fdde={..._0x23fdde,'telegramToken':_0x2a42cb};}if(_0x4a9e46&&_0x23fdde[_0x3b9a0d(0x259)]!='************'&&_0x23fdde[_0x3b9a0d(0x259)]!=_0x3b9a0d(0x19b)&&_0x23fdde[_0x3b9a0d(0x259)]!=''){const _0x26610f=decryptRSA(secure[_0x3b9a0d(0x214)],_0x23fdde[_0x3b9a0d(0x259)])['split'](_0x3b9a0d(0x2a2))[0x0];_0x23fdde={..._0x23fdde,'marketcapApi':_0x26610f};}const _0x677f71=_0x23fdde[_0x3b9a0d(0x308)]!='************'&&_0x23fdde[_0x3b9a0d(0x308)]!=settings[_0x3b9a0d(0x308)]||_0x23fdde[_0x3b9a0d(0x212)]!=settings['telegramUsername'],_0x5c2113=_0x23fdde[_0x3b9a0d(0x308)]==''||_0x23fdde[_0x3b9a0d(0x212)]=='',_0x102196=_0x23fdde[_0x3b9a0d(0x259)]&&_0x23fdde[_0x3b9a0d(0x259)]!='************'&&_0x23fdde['marketcapApi']!=settings[_0x3b9a0d(0x259)];_0x677f71&&(_0x23fdde[_0x3b9a0d(0x18f)]=null,_0x23fdde[_0x3b9a0d(0x199)]='all');for(const [_0x1088c8,_0x476300]of Object[_0x3b9a0d(0x2d0)](_0x23fdde)){if(_0x1088c8==_0x3b9a0d(0x308)&&_0x476300==_0x3b9a0d(0x328)){_0x23fdde[_0x3b9a0d(0x308)]=settings[_0x3b9a0d(0x308)];continue;};if(_0x1088c8==_0x3b9a0d(0x1ce)&&_0x476300==_0x3b9a0d(0x328)){_0x23fdde['bbPassword']=settings[_0x3b9a0d(0x1ce)];continue;};if(_0x1088c8=='marketcapApi'&&_0x476300==_0x3b9a0d(0x328)){_0x23fdde['marketcapApi']=settings[_0x3b9a0d(0x259)];continue;};dbSettings[_0x3b9a0d(0x370)](_0x3b9a0d(0x2aa)+_0x1088c8,_0x476300)[_0x3b9a0d(0x1f7)]();}settings=_0x23fdde,io['to'](_0x3b9a0d(0x29e))[_0x3b9a0d(0x33b)]('settings',cleanSettings()),broadcastToBots(_0x3b9a0d(0x2ff),settings[_0x3b9a0d(0x2ff)]),broadcastToBots('onepagemode',settings[_0x3b9a0d(0x2c9)]),broadcastToBots('marketcapApi',settings['marketcapApi']);if(_0x677f71&&!_0x5c2113)initTelegram();_0x677f71&&_0x5c2113&&(updateSetting('telegramChatId',null),disableTelegram()),getAllClients()[_0x3b9a0d(0x289)](_0x12d0d0=>{const _0x2afc5b=_0x3b9a0d;getSocket(_0x12d0d0['id'])[_0x2afc5b(0x33b)](_0x2afc5b(0x300),{'access':{'allow':![],'reason':'reload','token':null}});}),_0x102196&&(await sleep(0xbb8),testMarketcapApi(_0x23fdde[_0x3b9a0d(0x259)]));}async function testMarketcapApi(_0x2c95cc){const _0x31af40=_0x2bc9c3,_0xdc3140=[_0x31af40(0x1ea),'ETH'];try{await axios[_0x31af40(0x1ab)](_0x31af40(0x191),{'headers':{'X-CMC_PRO_API_KEY':_0x2c95cc},'params':{'symbol':_0xdc3140[_0x31af40(0x304)]()}});}catch(_0x4b956a){_0x4b956a['toString']()['includes'](_0x31af40(0x219))?(io['to'](_0x31af40(0x29e))[_0x31af40(0x33b)]('notification',_0x31af40(0x32e)),logger['full']('CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager')):(io['to'](_0x31af40(0x29e))['emit'](_0x31af40(0x1d7),_0x31af40(0x342)),logger[_0x31af40(0x1a6)]('CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details'),logger[_0x31af40(0x324)](_0x31af40(0x221),_0x4b956a['toString']()+_0x31af40(0x2a1)+_0x4b956a[_0x31af40(0x1b5)]));return;}logger['debug'](_0x31af40(0x2c0));}function updateSetting(_0x2f52e1,_0x443bac){const _0x3fdf48=_0x2bc9c3;dbSettings[_0x3fdf48(0x370)](_0x3fdf48(0x2aa)+_0x2f52e1,_0x443bac)[_0x3fdf48(0x1f7)](),settings=getSettings(),io['to'](_0x3fdf48(0x29e))[_0x3fdf48(0x33b)]('settings',cleanSettings());}function storeSecure(_0x319ce5){const _0x297561=_0x2bc9c3;dbSecure[_0x297561(0x1ab)](_0x297561(0x25d))[_0x297561(0x247)](_0x319ce5)[_0x297561(0x1f7)](),secure=_0x319ce5;}function addBlacklist(_0x5abc59){const _0x573172=_0x2bc9c3;cleanBlacklist();let _0x27161b;devices[_0x5abc59][_0x573172(0x2ba)]?_0x27161b=Math[_0x573172(0x318)](devices[_0x5abc59][_0x573172(0x2ba)][_0x573172(0x3ac)],loginExpiry):_0x27161b=loginExpiry,dbSecure[_0x573172(0x1ab)]('blacklist')[_0x573172(0x247)]({'expiry':new Date()['getTime']()+_0x27161b*0x3c*0x3e8,'token':devices[_0x5abc59][_0x573172(0x27e)][_0x573172(0x1c5)]})[_0x573172(0x1f7)](),blacklist=dbSecure['get']('blacklist')[_0x573172(0x1f9)]();}function cleanBlacklist(){const _0x1f5038=_0x2bc9c3;let _0xf497a9=dbSecure[_0x1f5038(0x1ab)]('blacklist')[_0x1f5038(0x27c)]()['value'](),_0x1c54ef=new Date()[_0x1f5038(0x379)]();_0xf497a9[_0x1f5038(0x289)](_0x175db0=>{const _0x4ddd2e=_0x1f5038;_0x175db0[_0x4ddd2e(0x3ac)]<_0x1c54ef&&dbSecure['get'](_0x4ddd2e(0x1c1))[_0x4ddd2e(0x2c6)]({'expiry':_0x175db0[_0x4ddd2e(0x3ac)]})[_0x4ddd2e(0x1f7)]();});}function _0x4a19(_0x421619,_0x25ad76){const _0x280b42=_0x4f6b();return _0x4a19=function(_0x20c6f7,_0xbcdb5){_0x20c6f7=_0x20c6f7-0x186;let _0x4f6b38=_0x280b42[_0x20c6f7];return _0x4f6b38;},_0x4a19(_0x421619,_0x25ad76);}function initStates(){let _0x2df4fa=getConfiguration();_0x2df4fa['forEach'](_0x1c5bbb=>{const _0x25b8f6=_0x4a19;_0x1c5bbb['live']=_0x25b8f6(0x32a);}),storeConfiguration(_0x2df4fa);}async function generateKeys(){const _0x29dcca=_0x2bc9c3,_0x324068=forge[_0x29dcca(0x2cd)][_0x29dcca(0x30b)]['generateKeyPair']({'bits':0x1000,'e':0x10001}),_0x1f8f3d=forge[_0x29dcca(0x2cd)][_0x29dcca(0x1b0)](_0x324068[_0x29dcca(0x214)]),_0x375f9f=forge[_0x29dcca(0x2cd)][_0x29dcca(0x346)](_0x324068['publicKey']);return{'privateKey':_0x1f8f3d,'publicKey':_0x375f9f};}async function oneTimeMigration(){const _0x2baea2=_0x2bc9c3;let _0x49eb1a=getSettings(),_0x6ddbd9=![];!_0x49eb1a[_0x2baea2(0x18b)](_0x2baea2(0x335))&&(_0x49eb1a[_0x2baea2(0x335)]=0x0,_0x6ddbd9=!![]);!_0x49eb1a['hasOwnProperty'](_0x2baea2(0x1e2))&&(_0x49eb1a['lastmsgemitted']=0x0,_0x6ddbd9=!![]);!_0x49eb1a[_0x2baea2(0x18b)](_0x2baea2(0x321))&&(_0x49eb1a[_0x2baea2(0x321)]='0.0.0',_0x6ddbd9=!![]);!_0x49eb1a[_0x2baea2(0x18b)]('onepagemode')&&(_0x49eb1a['onepagemode']=![],_0x6ddbd9=!![]);!_0x49eb1a[_0x2baea2(0x18b)](_0x2baea2(0x259))&&(_0x49eb1a[_0x2baea2(0x259)]='',_0x6ddbd9=!![]);if(_0x6ddbd9)storeSettings(_0x49eb1a);try{fs[_0x2baea2(0x1e9)](configbackuppath,{'withFileTypes':!![]})[_0x2baea2(0x289)](_0x1698eb=>{const _0x3439da=_0x2baea2;if(!_0x1698eb['isDirectory']()){if(!_0x1698eb[_0x3439da(0x39b)]['startsWith']('backup-full@'))fs[_0x3439da(0x278)](configbackuppath+_0x1698eb[_0x3439da(0x39b)]);}else fs[_0x3439da(0x23f)](configbackuppath+_0x1698eb['name'],{'recursive':!![]});});}catch(_0x36798c){logger['debug'](_0x2baea2(0x229),_0x36798c);}}function storeConfiguration(_0xab8a25){const _0x232c63=_0x2bc9c3;dbConfig[_0x232c63(0x1ab)](_0x232c63(0x2fc))[_0x232c63(0x2c6)]()[_0x232c63(0x1f7)](),dbConfig[_0x232c63(0x1ab)]('bots')[_0x232c63(0x247)](..._0xab8a25)['write'](),config=_0xab8a25;}async function resetPassword(){const _0x32a86c=_0x2bc9c3;if(tgBot&&settings[_0x32a86c(0x18f)]){const _0x8df020=Markup[_0x32a86c(0x2cb)]([Markup[_0x32a86c(0x281)][_0x32a86c(0x297)](_0x32a86c(0x2be),_0x32a86c(0x37f)),Markup[_0x32a86c(0x281)][_0x32a86c(0x297)]('no','resetpw_no')]);await sendTelegram(settings[_0x32a86c(0x18f)],_0x32a86c(0x1f3),_0x8df020),tgBot['action'](/resetpw_(.+)/,async _0x3e68d1=>{const _0x1a8d82=_0x32a86c,_0x54966d=_0x3e68d1[_0x1a8d82(0x1bf)][0x1];_0x3e68d1[_0x1a8d82(0x322)]();if(_0x54966d!='no'){const _0x251d34=0xf,_0x4c46fd='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!@-#$',_0x362a6d=Array['from'](crypto[_0x1a8d82(0x353)](new Uint32Array(_0x251d34)))[_0x1a8d82(0x2b1)](_0x1409ac=>_0x4c46fd[_0x1409ac%_0x4c46fd[_0x1a8d82(0x213)]])[_0x1a8d82(0x356)](''),_0x59fe8b=bcrypt['hashSync'](_0x362a6d,saltRounds);storeSettings({'bbPassword':_0x59fe8b}),await sendTelegram(_0x3e68d1[_0x1a8d82(0x380)]['id'],_0x1a8d82(0x34d)+_0x362a6d,{'parse_mode':'HTML'});}else await sendTelegram(_0x3e68d1['chat']['id'],_0x1a8d82(0x267));});}}async function confirmRestore(_0x951fe0,_0x4753b2){const _0x179512=_0x2bc9c3;io['to'](_0x179512(0x29e))[_0x179512(0x33b)](_0x179512(0x1d7),_0x179512(0x1d1),_0x179512(0x230));if(tgBot&&settings[_0x179512(0x18f)]){const _0x2c0135=uuidRandom();tmpStorage[_0x2c0135]={'path':_0x951fe0,'filename':_0x4753b2};const _0x4f8f10=Markup['inlineKeyboard']([Markup['button'][_0x179512(0x297)](_0x179512(0x2be),_0x179512(0x26d)+_0x2c0135),Markup[_0x179512(0x281)]['callback']('no','restore_no_'+_0x2c0135)]);await sendTelegram(settings['telegramChatId'],_0x179512(0x256),_0x4f8f10),tgBot['action'](/restore_(.+)_(.+)/,async _0x1d2e59=>{const _0xb3eab7=_0x179512,_0x32264a=_0x1d2e59['match'][0x1],_0x387ebf=_0x1d2e59[_0xb3eab7(0x1bf)][0x2],{path:_0x3e7313,filename:_0x4b84d8}=tmpStorage[_0x387ebf];delete tmpStorage[_0x387ebf],_0x1d2e59[_0xb3eab7(0x322)](),_0x32264a==_0xb3eab7(0x2be)?(logger['debug']('Restore\x20process\x20confirmed'),await sendTelegram(_0x1d2e59['chat']['id'],_0xb3eab7(0x2fa),{'parse_mode':_0xb3eab7(0x270)}),unzipFile(_0x3e7313,_0x4b84d8)):(logger['debug']('Restore\x20process\x20aborted'),await sendTelegram(_0x1d2e59[_0xb3eab7(0x380)]['id'],_0xb3eab7(0x254)));});}}function getServerTime(){const _0x783759=_0x2bc9c3,_0x30f4b6=new Date();return _0x30f4b6['getFullYear']()+'/'+(_0x30f4b6[_0x783759(0x19c)]()+0x1)[_0x783759(0x304)]()[_0x783759(0x341)](0x2,'0')+'/'+_0x30f4b6[_0x783759(0x384)]()[_0x783759(0x304)]()['padStart'](0x2,'0')+'\x20'+_0x30f4b6[_0x783759(0x28f)]()[_0x783759(0x304)]()[_0x783759(0x341)](0x2,'0')+':'+_0x30f4b6[_0x783759(0x24b)]()[_0x783759(0x304)]()['padStart'](0x2,'0')+':'+_0x30f4b6[_0x783759(0x2bb)]()[_0x783759(0x304)]()[_0x783759(0x341)](0x2,'0');}function getTimeStamp(){const _0x4726c6=_0x2bc9c3,_0x137521=shiftedTime();return _0x137521[_0x4726c6(0x32c)]()+'/'+(_0x137521[_0x4726c6(0x19c)]()+0x1)[_0x4726c6(0x304)]()[_0x4726c6(0x341)](0x2,'0')+'/'+_0x137521[_0x4726c6(0x384)]()[_0x4726c6(0x304)]()[_0x4726c6(0x341)](0x2,'0')+'\x20'+_0x137521[_0x4726c6(0x28f)]()[_0x4726c6(0x304)]()['padStart'](0x2,'0')+':'+_0x137521['getMinutes']()['toString']()[_0x4726c6(0x341)](0x2,'0')+':'+_0x137521[_0x4726c6(0x2bb)]()[_0x4726c6(0x304)]()[_0x4726c6(0x341)](0x2,'0');}function getCleanTimeStamp(){const _0x407faa=_0x2bc9c3,_0x20fa2a=shiftedTime();return _0x20fa2a[_0x407faa(0x32c)]()+(_0x20fa2a[_0x407faa(0x19c)]()+0x1)[_0x407faa(0x304)]()[_0x407faa(0x341)](0x2,'0')+_0x20fa2a[_0x407faa(0x384)]()['toString']()[_0x407faa(0x341)](0x2,'0')+'-'+_0x20fa2a[_0x407faa(0x28f)]()[_0x407faa(0x304)]()[_0x407faa(0x341)](0x2,'0')+_0x20fa2a[_0x407faa(0x24b)]()[_0x407faa(0x304)]()[_0x407faa(0x341)](0x2,'0')+_0x20fa2a[_0x407faa(0x2bb)]()[_0x407faa(0x304)]()[_0x407faa(0x341)](0x2,'0');}function shiftedTime(){const _0x16b16d=_0x2bc9c3,_0x2069d3=new Date();let _0x121e1a=_0x2069d3;if(settings[_0x16b16d(0x2ff)]&&settings[_0x16b16d(0x2ff)]!==0x0)_0x121e1a=fns[_0x16b16d(0x314)](_0x2069d3,{'hours':settings['timeshift']});return _0x121e1a;}async function startScheduler(){const _0x19929d=_0x2bc9c3,_0x5a24d9=new Date()[_0x19929d(0x29d)](),_0x3cc479=shiftedTime()[_0x19929d(0x28f)]();_0x3cc479==0x4&&backupConfigFiles(),_0x3cc479==0x0&&(rotateLogFiles(),logger[_0x19929d(0x324)](_0x19929d(0x2e8)),logger[_0x19929d(0x324)](_0x19929d(0x23e)+serverversion+'#RES#\x20'+(environment==_0x19929d(0x3a4)?_0x19929d(0x378):'')),logger[_0x19929d(0x324)](_0x19929d(0x2e8))),_0x5a24d9%0x6==0x0&&triggerAnalytics(),_0x5a24d9%0x6==0x0&&getMessages(),await sleep(schedulerInterval),startScheduler();}async function restoreBackupFile(_0x33dc7f){const _0x4c07bb=_0x2bc9c3;logger['debug'](_0x4c07bb(0x1c6)+_0x33dc7f);const _0x5f1fc1=getBotsWithMode();_0x5f1fc1[_0x4c07bb(0x213)]>0x0?confirmRestore(configbackuppath,_0x33dc7f):unzipFile(configbackuppath,_0x33dc7f);}async function getBackupFiles(_0x4d3dfa=null){const _0x22589c=_0x2bc9c3;let _0x20bb69=[],_0x2d73e8=fs[_0x22589c(0x1e9)](configbackuppath,{'withFileTypes':!![]});_0x2d73e8[_0x22589c(0x1f1)]((_0x8cf032,_0x102c8e)=>_0x8cf032[_0x22589c(0x39b)]<_0x102c8e['name']?0x1:_0x102c8e['name']<_0x8cf032[_0x22589c(0x39b)]?-0x1:0x0),_0x2d73e8[_0x22589c(0x289)](_0x1c6960=>{const _0x359028=_0x22589c;if(!_0x1c6960[_0x359028(0x1c7)]()&&_0x1c6960[_0x359028(0x39b)][_0x359028(0x3a3)](_0x359028(0x2cc))&&_0x1c6960[_0x359028(0x39b)]['endsWith']('.zip')){const _0x5212aa=formatDate(fs[_0x359028(0x20b)](configbackuppath+_0x1c6960[_0x359028(0x39b)])[_0x359028(0x232)]);_0x20bb69[_0x359028(0x247)]({'name':_0x1c6960['name'],'mtime':_0x5212aa});}});if(_0x4d3dfa)io['to'](_0x4d3dfa)[_0x22589c(0x33b)](_0x22589c(0x1bb),_0x20bb69);else return _0x20bb69;}async function backupConfigFiles(){const _0x530767=_0x2bc9c3;await zipFiles(_0x530767(0x2b6));const _0x5b3dde=getCleanTimeStamp();fs[_0x530767(0x2f6)](zippath+_0x530767(0x2d7),configbackuppath+(_0x530767(0x2cc)+_0x5b3dde+_0x530767(0x2dc)));let _0x26c021=fs[_0x530767(0x1e9)](configbackuppath,{'withFileTypes':!![]});_0x26c021[_0x530767(0x1f1)]((_0x1a7665,_0x38fbc)=>_0x1a7665[_0x530767(0x39b)]<_0x38fbc[_0x530767(0x39b)]?0x1:_0x38fbc[_0x530767(0x39b)]<_0x1a7665['name']?-0x1:0x0),_0x26c021['length']>maxBackups&&fs['unlinkSync'](configbackuppath+_0x26c021[_0x26c021[_0x530767(0x213)]-0x1][_0x530767(0x39b)]);}function rotateLogFiles(){const _0x303c3f=_0x2bc9c3,_0x1e935e=fs['statSync'](logspath+'output-000.log'),_0x51ac7c=_0x1e935e[_0x303c3f(0x22f)]/0x400;if(_0x51ac7c>0x64){let _0x109169=fs[_0x303c3f(0x1e9)](logspath,{'withFileTypes':!![]});_0x109169[_0x303c3f(0x1f1)]((_0x34294b,_0x32125c)=>_0x34294b['name']<_0x32125c[_0x303c3f(0x39b)]?0x1:_0x32125c[_0x303c3f(0x39b)]<_0x34294b[_0x303c3f(0x39b)]?-0x1:0x0),_0x109169[_0x303c3f(0x289)](_0x24d1db=>{const _0x3f437c=_0x303c3f;if(_0x24d1db[_0x3f437c(0x39b)]==_0x3f437c(0x1d5))fs['copyFileSync'](logspath+_0x24d1db['name'],logspath+_0x3f437c(0x2c7));if(_0x24d1db['name']==_0x3f437c(0x1df))fs['copyFileSync'](logspath+_0x24d1db['name'],logspath+_0x3f437c(0x1d5));_0x24d1db[_0x3f437c(0x39b)]==_0x3f437c(0x1ba)&&(fs[_0x3f437c(0x2f6)](logspath+_0x24d1db[_0x3f437c(0x39b)],logspath+_0x3f437c(0x1df)),fs[_0x3f437c(0x37b)](logspath+_0x24d1db[_0x3f437c(0x39b)],''));});}}async function zipFiles(_0x333d34){const _0x5cf108=_0x2bc9c3;let _0x4d7997;if(_0x333d34==_0x5cf108(0x288))_0x4d7997=logspath;if(_0x333d34==_0x5cf108(0x1fd))_0x4d7997=configpath;if(_0x333d34==_0x5cf108(0x2b6))_0x4d7997=configpath;let _0x2cae49=fs[_0x5cf108(0x1e9)](_0x4d7997,{'withFileTypes':!![]});const _0x382751=new JSZip();_0x2cae49[_0x5cf108(0x289)](_0x171a28=>{const _0x317b82=_0x5cf108;if(!_0x171a28[_0x317b82(0x1c7)]()){let _0x314cc3=fs[_0x317b82(0x387)](_0x4d7997+_0x171a28[_0x317b82(0x39b)]);if(_0x333d34==_0x317b82(0x1fd)){const _0x3aad78=/^bot-[0-9]{3}-config.json$/,_0x3c3c33=_0x3aad78[_0x317b82(0x1af)](_0x171a28[_0x317b82(0x39b)]);if(_0x3c3c33){const _0x38908b=JSON[_0x317b82(0x22b)](_0x314cc3);if(_0x38908b[_0x317b82(0x33e)][0x0]){_0x38908b['bot'][0x0][_0x317b82(0x2ee)]='***',_0x38908b[_0x317b82(0x33e)][0x0][_0x317b82(0x250)]=_0x317b82(0x19b);if(_0x38908b[_0x317b82(0x33e)][0x0][_0x317b82(0x291)])_0x38908b['bot'][0x0][_0x317b82(0x291)]=_0x317b82(0x19b);}_0x314cc3=JSON[_0x317b82(0x1e8)](_0x38908b,null,0x2);}if(_0x171a28[_0x317b82(0x39b)]==_0x317b82(0x33c)){const _0x384dc8=JSON[_0x317b82(0x22b)](_0x314cc3);if(_0x384dc8[_0x317b82(0x310)][_0x317b82(0x1e7)])_0x384dc8[_0x317b82(0x310)][_0x317b82(0x1e7)]=![];if(_0x384dc8[_0x317b82(0x310)][_0x317b82(0x1ce)])_0x384dc8[_0x317b82(0x310)]['bbPassword']='***';if(_0x384dc8[_0x317b82(0x310)][_0x317b82(0x308)])_0x384dc8['settings'][_0x317b82(0x308)]=_0x317b82(0x19b);if(_0x384dc8[_0x317b82(0x310)]['telegramChatId'])_0x384dc8[_0x317b82(0x310)]['telegramChatId']=null;if(_0x384dc8[_0x317b82(0x310)]['marketcapApi'])_0x384dc8[_0x317b82(0x310)][_0x317b82(0x259)]=_0x317b82(0x19b);_0x314cc3=JSON['stringify'](_0x384dc8,null,0x2);}if(_0x171a28[_0x317b82(0x39b)]!=_0x317b82(0x1eb))_0x382751['file'](_0x171a28[_0x317b82(0x39b)],_0x314cc3);}else _0x382751['file'](_0x171a28['name'],_0x314cc3);}});const _0x5b2219=await _0x382751['generateAsync']({'type':_0x5cf108(0x372),'base64':![],'compression':'DEFLATE'});fs[_0x5cf108(0x37b)](zippath+(_0x333d34+_0x5cf108(0x2dc)),_0x5b2219,_0x5cf108(0x326));}async function unzipFile(_0x4811de,_0x1b2617){const _0x1deea9=_0x2bc9c3;fs['readdirSync'](configpath,{'withFileTypes':!![]})['forEach'](_0x3a4e17=>{const _0x12f07e=_0x4a19;if(!_0x3a4e17[_0x12f07e(0x1c7)]())fs[_0x12f07e(0x23f)](configpath+_0x3a4e17[_0x12f07e(0x39b)]);});const _0x2622f0=fs['readFileSync'](_0x4811de+_0x1b2617,_0x1deea9(0x326)),_0x4b9ab9=await JSZip[_0x1deea9(0x31f)](_0x2622f0,{'base64':![],'checkCRC32':!![]});for(const _0x4b2d33 of Object[_0x1deea9(0x35f)](_0x4b9ab9[_0x1deea9(0x246)])){const _0x31289d=_0x4b9ab9[_0x1deea9(0x246)][_0x4b2d33],_0x3749ab=await _0x31289d['async'](_0x1deea9(0x372));fs[_0x1deea9(0x37b)](configpath+_0x31289d[_0x1deea9(0x39b)],_0x3749ab);}fs[_0x1deea9(0x1e9)](temppath,{'withFileTypes':!![]})['forEach'](_0x3087e5=>{const _0x456eeb=_0x1deea9;if(!_0x3087e5[_0x456eeb(0x1c7)]())fs[_0x456eeb(0x23f)](temppath+_0x3087e5[_0x456eeb(0x39b)]);}),logger[_0x1deea9(0x324)]('Backup\x20file\x20unzipped\x20and\x20stored'),process[_0x1deea9(0x248)]({'restore':!![]},_0x38a461=>{});}async function getPublicIp(){const _0x5ecc95=_0x2bc9c3;try{const _0x4cf43a=await axios['get'](_0x5ecc95(0x337));publicip=_0x4cf43a['data']['ip'];}catch(_0x115f0d){}}async function triggerAnalytics(){const _0x528b46=_0x2bc9c3;if(!publicip)await getPublicIp();const _0x12bdce=getBotsWithMode();let _0x360056=0x0;_0x12bdce[_0x528b46(0x289)](_0x486443=>{const _0x316181=_0x528b46;if(_0x486443[_0x316181(0x300)]==='enabled')_0x360056++;});const _0x20f91e=getBotExchanges();mixpanel[_0x528b46(0x19e)](_0x528b46(0x33a),{'distinct_id':settings['userid'],'ip':publicip,'version':serverversion,'numbots':_0x12bdce['length'],'numbotsenabled':_0x360056,'exchanges':_0x20f91e,'environment':environment});}async function getMessages(){const _0x3a7951=_0x2bc9c3,_0x41f332='https://api-eu-central-1.graphcms.com/v2/ckoytzv3lotky01w59glace7y/master',_0x530b0c=new GraphQLClient(_0x41f332),_0x24b5a8={'authorization':_0x3a7951(0x38f)},_0x37c17d=serverversion[_0x3a7951(0x345)]('.'),_0x25e38e=_0x37c17d[0x0]+'.'+_0x37c17d[0x1],_0x3b073a=Math[_0x3a7951(0x1fa)](settings[_0x3a7951(0x335)],settings[_0x3a7951(0x1e2)]),_0x1d9f96={'last':parseInt(_0x3b073a),'bbm':_0x25e38e},_0x48f26c=gql`
            query getMessages($bbm: String!, $last: Int!) {
                messages(where: {
                    number_gt: $last
                    OR: [
                    {bbvReceive: "any"},
                    {bbvReceive_contains: $bbm}
                    ]
                    archived_not: true
                }, orderBy: number_ASC) {
                    id
                    number
                    bbvReceive
                    bbvNew
                    title
                    message
                    dialogWidth
                    lock
                }
            }
            `;let _0x30e9d0;try{_0x30e9d0=await _0x530b0c[_0x3a7951(0x2ec)](_0x48f26c,_0x1d9f96,_0x24b5a8);}catch(_0x1f76fb){}if(_0x30e9d0&&_0x30e9d0['messages']){let _0x528697=settings[_0x3a7951(0x335)],_0x4e830a=settings[_0x3a7951(0x335)];newMessages=[];for(const _0x352cb0 of _0x30e9d0[_0x3a7951(0x251)]){newMessages['push'](_0x352cb0);let _0x1dfdae=![];_0x352cb0[_0x3a7951(0x215)]&&(updateSetting(_0x3a7951(0x321),_0x352cb0[_0x3a7951(0x215)]),_0x1dfdae=isNewerVersion(serverversion,_0x352cb0['bbvNew'])||serverversion==_0x352cb0[_0x3a7951(0x215)]);if(!_0x1dfdae&&_0x352cb0['number']>_0x528697){if(_0x352cb0['bbvReceive']==='any'||serverversion[_0x3a7951(0x3a3)](_0x352cb0['bbvReceive'])){let _0x46bcd2=''+_0x352cb0[_0x3a7951(0x1b7)]+'\x0a\x0a'+_0x352cb0[_0x3a7951(0x2d4)];const _0x1a642f=await sendTelegramMsg(toTelegramMarkdown(_0x46bcd2),_0x3a7951(0x386));_0x528697=_0x352cb0[_0x3a7951(0x392)];}}_0x4e830a=_0x352cb0[_0x3a7951(0x392)];}updateAvailable=isNewerVersion(settings[_0x3a7951(0x321)],serverversion),updateSetting(_0x3a7951(0x335),_0x4e830a),emitMessages();}}function emitMessages(){const _0x31a65a=_0x2bc9c3,_0x21240e=settings[_0x31a65a(0x1e2)];let _0x4cf465=[];newMessages['forEach'](_0xb7da47=>{const _0xd8c897=_0x31a65a;_0xb7da47['number']>_0x21240e&&_0x4cf465[_0xd8c897(0x247)](_0xb7da47);}),_0x4cf465[_0x31a65a(0x213)]>0x0&&getAllClients()[_0x31a65a(0x289)](_0x45363b=>{const _0x28d51e=_0x31a65a;getSocket(_0x45363b['id'])[_0x28d51e(0x33b)](_0x28d51e(0x2d4),_0x4cf465);});}function confirmMessage(_0x52d9c6){updateSetting('lastmsgemitted',Number(_0x52d9c6));}function isNewerVersion(_0x1644e7,_0x235588){const _0x4c6742=_0x2bc9c3,_0x411b3a=_0x235588[_0x4c6742(0x345)]('.'),_0x45cbdd=_0x1644e7[_0x4c6742(0x345)]('.');for(var _0x151a39=0x0;_0x151a39<_0x45cbdd[_0x4c6742(0x213)];_0x151a39++){const _0x4e0320=~~_0x45cbdd[_0x151a39],_0x5b99da=~~_0x411b3a[_0x151a39];if(_0x4e0320>_0x5b99da)return!![];if(_0x4e0320<_0x5b99da)return![];}return![];}function toTelegramMarkdown(_0x2b39ac){const _0x58fb07=_0x2bc9c3,_0x320e15=/(^|[^\*])\*{1}([^\*.]+?)\*{1}([^\*]|$)/gim,_0x1ba79f=/\*{2}(.+?)\*{2}/gim;return _0x2b39ac=_0x2b39ac[_0x58fb07(0x1fb)](_0x320e15,_0x58fb07(0x334))[_0x58fb07(0x1fb)](_0x1ba79f,'*$1*'),_0x2b39ac;}async function validateConfigFile(){const _0x56fd89=_0x2bc9c3,_0x334430=dbConfig['get']('bots')['sortBy'](_0x56fd89(0x195))[_0x56fd89(0x1f9)]()||[];if(_0x334430[_0x56fd89(0x213)]==0x0){let _0x229e53=0x0,_0x53b45d=[];const _0x192b0e=/^bot-([0-9]{3})-config.json$/,_0x269d69=fs[_0x56fd89(0x1e9)](configpath);_0x269d69['forEach'](_0x1a8147=>{const _0x1f8b0b=_0x56fd89,_0x39cc5a=_0x192b0e['exec'](_0x1a8147);if(_0x39cc5a){const _0x28e4fc=_0x39cc5a[0x1];let _0xa7e42e=getBotAttributes(_0x28e4fc);_0x53b45d[_0x1f8b0b(0x247)]({'botID':_0x28e4fc,'botname':_0xa7e42e[_0x1f8b0b(0x2b2)],'status':_0x1f8b0b(0x1b8),'live':_0x1f8b0b(0x32a)}),_0x229e53++;}}),_0x229e53!=0x0&&(dbConfig[_0x56fd89(0x1ab)](_0x56fd89(0x2fc))[_0x56fd89(0x194)](_0x53b45d)['write'](),config=_0x53b45d,restoredConfigFile=_0x229e53);}}async function restoreConfigNotify(_0x51c2e9){const _0xa60433=_0x2bc9c3;let _0x39eb15;if(restoredConfigFile==0x1)_0x39eb15='NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bot\x20is\x20disabled\x20by\x20default\x20-\x20enable\x20if\x20you\x20want\x20it\x20to\x20run';else _0x39eb15=_0xa60433(0x1fe);if(_0x51c2e9)io['to']('botmanager')[_0xa60433(0x33b)](_0xa60433(0x1d7),_0x39eb15);else{logger[_0xa60433(0x286)](_0xa60433(0x348)),logger[_0xa60433(0x286)](_0x39eb15),logger[_0xa60433(0x286)](_0xa60433(0x348)),logger['simple']('');if(tgBot&&settings['telegramChatId']&&settings['telegramEvents']!=_0xa60433(0x376))await sendTelegram(settings[_0xa60433(0x18f)],_0xa60433(0x362)+_0x39eb15);}}function decryptRSA(_0x59a83e,_0x1f4f6a){const _0x195794=_0x2bc9c3,_0x4bc53d=forge[_0x195794(0x2cd)][_0x195794(0x2e5)](_0x59a83e),_0x280ea1=_0x4bc53d[_0x195794(0x393)](forge[_0x195794(0x1f2)][_0x195794(0x383)](_0x1f4f6a),_0x195794(0x2c4),{'md':forge['md'][_0x195794(0x38e)][_0x195794(0x206)](),'mgf1':{'md':forge['md'][_0x195794(0x38e)]['create']()}});return _0x280ea1;}function validateCredentials(_0x4cd845,_0x47b0a4){const _0x29eeaa=_0x2bc9c3;if(_0x4cd845[_0x29eeaa(0x1d4)]==settings[_0x29eeaa(0x1c2)]&&bcrypt[_0x29eeaa(0x23d)](_0x4cd845[_0x29eeaa(0x218)],settings['bbPassword'])){if(settings[_0x29eeaa(0x369)])return{'allow':![],'reason':'2FA\x20login\x20required','token':null};else{const _0x1ae6fb=generateLoginToken(_0x47b0a4);return{'allow':!![],'reason':'login\x20token\x20generated','token':_0x1ae6fb};}}else return{'allow':![],'reason':_0x29eeaa(0x1ac),'token':null};}function _0x4f6b(){const _0xa634b7=['util','Do\x20you\x20want\x20to\x20reset\x20your\x20password?','isValid','handshake','\x1b[36m','write','ipc','value','min','replace','node','backup','NOTE:\x0aYour\x20bb-config.json\x20file\x20got\x20corrupted,\x20but\x20it\x20has\x20been\x20restored!\x20\x0aYour\x20bots\x20are\x20disabled\x20by\x20default\x20-\x20enable\x20those\x20you\x20want\x20to\x20run','clientip','reinstall_yes','reset-history','Unauthorized\x20attempt\x20to\x20update\x20settings','reinstall_no','[ip-address]','\x20|\x20client:\x20...','create','store-configuration','/upload-backup','\x20mode','All','statSync','Failed\x20to\x20download\x20','/on\x20-\x20start\x20bot(s)\x0a','showConfig','<b>Telegram\x20Bot\x20Status:</b>\x0a','5\x20min','metrics_','telegramUsername','length','privateKey','bbvNew','reason','open','password','status\x20code\x20401','\x20files\x20over\x20Telegram:','crypto','getStartingBalances','Unauthorized\x20attempt\x20to\x20log\x20out','search','reinstall','existsSync','Error\x20details:','#RES#\x20','Starting\x20Balance\x20Bot\x20reinstallation','mode','Ok,\x20reinstalling\x20Balance\x20Bot\x20canceled','start','user','Unauthorized\x20attempt\x20to\x20delete\x20bot','Error\x20removing\x20old\x20backup\x20files:','Ok,\x20will\x20send\x20order\x20notifications\x20only','parse','telegram','Ok,\x20will\x20send\x20both\x20order\x20and\x20alert\x20notifications','production','size','success','Which\x20bot\x20do\x20you\x20want\x20to\x20toggle?','mtime','index.html','restart_','Error\x20while\x20deleting\x20config\x20files:\x20','logout','timestamp','action','exchange','Unauthorized\x20attempt\x20to\x20reset\x20bot\x20history','Unauthorized\x20attempt\x20to\x20update\x20bot','/enable\x20-\x20enable\x20notifications\x0a','compareSync','Running\x20#RED#Balance\x20Bot\x20v','rmSync','Of\x20which\x20events\x20do\x20you\x20want\x20to\x20be\x20notified?','range','update_no','You\x20can\x20use\x20the\x20following\x20commands:\x0a','2FA\x20login\x20token\x20generated','deleteHistoryAlerts','files','push','send','http','3eOnTNl','getMinutes','toggle_','Session\x20expired\x20for\x20user\x20...','19190OoxGAN','Invalid\x20IP\x20address','apiSecret','messages','build','resetHistory','Restore\x20process\x20aborted','/:bot/coins','Do\x20you\x20want\x20to\x20restore\x20your\x20installation?\x20NOTE:\x20this\x20will\x20replace\x20your\x20current\x20settings\x20and\x20bot(s)','2FA\x20required','cancel-loading','marketcapApi','catch','=>\x20Go\x20to\x20#CYA#http://127.0.0.1:','store','secure','launch','Starting\x20new\x20bot\x20|\x20Bot\x20','createServer','Notifications\x20disabled','SIGINT','add-bot','started','telegrammsg','Which\x20bot\x20do\x20you\x20want\x20to\x20stop?','Password\x20reset\x20rejected','uuid','new','#RES#','/toggle\x20-\x20toggle\x20manual\x20vs\x20auto\x20mode\x0a','server','restore_yes_','#RES#\x20if\x20running\x20on\x20server','_nsps','HTML','store-settings','showname','-performance.json','config','bcryptjs','event','private','unlinkSync','child_process','IPv4','login','cloneDeep','/config\x20-\x20notification\x20types\x20to\x20receive\x0a','access','sendMetricsTelegram','\x1b[35m','button','Unauthorized\x20attempt\x20to\x20retrieve\x20list\x20of\x20backup\x20files','Unauthorized\x20login\x20attempt\x20(timeout)','all','(((.+)+)+)+$','simple','exp','logs','forEach','replyWithDocument','inherit','portfolio_','store-fiat','Unauthorized\x20attempt\x20to\x20delete\x20alerts','getHours','Logged\x20in\x20user\x20...','apiPassword','sendFile','All\x20bots\x20running\x20right\x20now','names','off','\x20to\x20','callback','Notifications\x20types:\x20orders\x20and\x20alerts\x0a','reject','uuid-random','toIPv4MappedAddress','Your\x20installation\x20does\x20not\x20support\x20updating\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20update','getUTCHours','botmanager','/:bot/history','toggle','\x20-\x20','|@|','alerts','2FA','find','15\x20min','Bot\x20Mgr\x20>\x20Toggling\x20','34630DHADbh','get-starting-balances','settings.','Allow\x20temporary\x20access\x20from\x20IP\x20address\x20','Unauthorized\x20attempt\x20to\x20store\x20headless\x20configuration','6b67f3d61ee94b8f5c80b4affef4c4d9','Unauthorized\x20attempt\x20to\x20add\x20bot','help','30\x20min','map','botname','order','build2','\x20|\x20','backup-full','10967SJyYbe','Which\x20bot\x20do\x20you\x20want\x20to\x20restart?','\x20minutes','telegramIpApproval','getSeconds','Temporary\x20access\x20rejected','post','yes','2FA\x20login\x20required','CoinMarketCap\x20API\x20key\x20validated','show-config','-results.json','clients','RSA-OAEP','toIPv4Address','remove','output-003.log','Bot\x20Mgr\x20>\x20Stopping\x20','onepagemode','pidExpireLogin','inlineKeyboard','backup-full@','pki','Unauthorized\x20attempt\x20to\x20get\x20messages','Invalid\x20username\x20or\x20IP\x20address','entries','disable','Enabled\x20','auto','message','log','includes','backup-full.zip','Error\x20sending\x20','-events.json','ipv6','express','.zip','::1','publicKey','manual','config_all','No\x20authentication\x20token','Setting\x20access:\x20','backup/','Token\x20blacklisted','privateKeyFromPem',':\x20Bot\x20Mgr\x20>\x20','address','--------------------------------------','warning','The\x20maximum\x20of\x20999\x20bots\x20has\x20been\x20reached','storeFiat','request','metrics','apiKey','Bot\x20Mgr\x20>\x20Stopping\x20all\x20bots','placeOrder','Starting\x20(','listen','Telegram\x20error:',')\x20\x20\x20|\x20Bot\x20','7449865YDnsMe','copyFileSync','Your\x20installation\x20does\x20not\x20support\x20reinstalling\x20from\x20Telegram.\x20Please\x20perform\x20a\x20manual\x20reinstallation','temporaryAccessAllowed','Unauthorized\x20attempt\x20to\x20update\x20Balance\x20Bot','Restoring\x20bot(s)\x20from\x20backup','3000','bots','removeAllListeners','fork','timeshift','status','Welcome\x20to\x20your\x20personal\x20Balance\x20Bot\x20Telegram\x20bot!\x0a','emitHistory','uncaughtException','toString','\x1b[31m','\x20only\x0a','127.0.0.1','telegramToken','update-bot','pidRefreshToken','rsa','>\x20Set\x20up\x20your\x20first\x20bot\x20in\x20the\x20Bot\x20Manager!','confirm-message','conn','graphql-request','settings','Starting\x20#RED#Balance\x20Bot\x20v','/names\x20-\x20show\x20bot\x20names\x0a','/status\x20-\x20show\x20bot(s)\x20status\x0a','add','constructor','Restarting\x20','login\x20required','max','Backup\x20file\x20uploaded','version.json','restart','api-eu.mixpanel.com','jszip','delete-alerts','loadAsync','mkdirSync','latestversion','editMessageReplyMarkup','place-order','debug','path','binary','stop','************','sign','stopped','secret','getFullYear','text','CoinMarketCap\x20API\x20key\x20is\x20invalid\x20-\x20enter\x20your\x20API\x20key\x20in\x20the\x20Bot\x20Manager','logged\x20out','get-logs','tempaccess_15_','Error:\x20Invalid\x20argument\x20','\x20(1)','$1_$2_$3','lastmsgtelegram','\x20(2)','https://api.ipify.org?format=json','reply','1000','Server','emit','bb-settings.json','kill','bot','mixpanel','whitelistEnabled','padStart','CoinMarketCap\x20data\x20could\x20not\x20be\x20retrieved\x20-\x20see\x20logs\x20for\x20details','telegram2FaApproval','Unauthorized\x20attempt\x20to\x20upload\x20file\x20(1)','split','publicKeyToPem','allow','-----------------------------------------------------------------------------------','delete-bot','exit','userid','static','Password\x20has\x20been\x20reset\x20to:\x20','store-headless','reload','address\x20already\x20in\x20use','\x1b[34m','update','randomFillSync','Invalid\x20authentication\x20token\x20(1)','tempaccess_reject_','join','SIGTERM','defaults','#RED#Balance\x20Bot\x20is\x20already\x20running\x20on\x20port\x20','No\x20bots\x20running\x20right\x20now','format','port','jsonwebtoken','reset-password','keys','update-bb','close','Bot\x20Mgr\x20>\x20','config/','enable','Yes','telegramEnabled','environment','hashSync','f2aRequired','running','login\x20token\x20generated','from','Unauthorized\x20attempt\x20to\x20reinstall\x20Balance\x20Bot','Notifications\x20enabled','::ffff:127.0.0.1','set','logs/','string','encryptedUuid','sendPortfolioTelegram','hex','orders',':\x20Bot\x20Mgr\x20>\x20Telegram\x20error\x20occured','(staging)','getTime','then','writeFileSync','login\x20token\x20valid','/disable\x20-\x20disable\x20notifications\x0a','Which\x20bot\x20do\x20you\x20want\x20to\x20start?','resetpw_yes','chat','0.0.0','config_orders','decode64','getDate','temporary\x20access\x20rejected','Markdown','readFileSync','temporary\x20access\x20not\x20allowed','Access\x20enabled\x20for\x20','/logs\x20-\x20receive\x20log\x20files\x0a','params','NTBA_FIX_319','Bot\x20Mgr\x20>\x20Starting\x20','sha256','Bearer\x20eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImdjbXMtbWFpbi1wcm9kdWN0aW9uIn0.eyJ2ZXJzaW9uIjozLCJpYXQiOjE2MjE2NjgzMzgsImF1ZCI6WyJodHRwczovL2FwaS1ldS1jZW50cmFsLTEuZ3JhcGhjbXMuY29tL3YyL2Nrb3l0enYzbG90a3kwMXc1OWdsYWNlN3kvbWFzdGVyIiwiaHR0cHM6Ly9tYW5hZ2VtZW50LW5leHQuZ3JhcGhjbXMuY29tIl0sImlzcyI6Imh0dHBzOi8vbWFuYWdlbWVudC5ncmFwaGNtcy5jb20vIiwic3ViIjoiYjZlOTBmODAtZmEzYS00ODJmLWE0NTAtMTY3YTFmZTliNzIzIiwianRpIjoiY2tvemZnaWE0Mno4bTAxdzU5bHU5ZTA3NSJ9.cEJ5isSubzX1ymlpkfyvfgZ6zyUMFiFOVaD4N84NoEOxwGZ8DtYM1k4DlCjoeCcTR8Ftr43bIGDxR4apANAG_-wf9Nge9T2MAuKa9z2sCWA5jnYtTHYU-x1Hx_ShpHAl1wPjrSpTMquV3bRlKQBm6EQTreoaQZgBXY25ClLbVzXFcohcDn3RGi3hHVRvxNLr0F7ETwFJnbowm9UX66vz2SP-5-u-CBKUxSipKMO5za0MZiIWoprSdE0f22xVXp8up3k_6-5x22mS88P2OFgMXoA-UBFS8nz6jRE_fRULzCouKYyJG3oQ10ovuZ1M729GQ0rMv9fkJroVKyS4i8KgglwPPBwQbaD2LCJXINKXYC65DmKyJ9UjWxQ9Lv6akcnkT7CkeqEqzwLnCEQgZEmJS_PBFDu40LMS8UbnwDcntJznA8rH_jsD7IkMdyRyXmns6fbLOc91Q1idBCk-VqUzkL0FzfscCVpkg1J7kGtGeW4YEWhWyPze4ZO4IxM9WRoSsCDUOx3EXklA0WSdR2M6IRnoFL-qoawOLQaaPACy8-QGmaAL6N6fuMIHUWavOTYnyLip0oyy74sUHz4S4sx4mAf5pexlvDcxM_6RIRnCQ84THsM2KwpoWkpR-F2s4pIyfYYn-4R7MNENfPGxNm4INjBYrCOWyZN_vXHGBa4uw2U','disconnect','\x1b[33m','number','decrypt','portfolio','Are\x20you\x20sure\x20you\x20want\x20to\x20reinstall\x20Balance\x20Bot\x20now?','Unauthorized\x20attempt\x20to\x20get\x20starting\x20balances','bot.js','Ok,\x20will\x20send\x20alert\x20notifications\x20only','restore-backup-file','Invalid\x20authentication\x20token\x20(2)','name','host','type','versions','All\x20bots',')\x20|\x20Bot\x20','Bot\x20','remoteAddress','startsWith','staging','yargs','Unauthorized\x20attempt\x20to\x20confirm\x20message','/help\x20-\x20show\x20available\x20commands\x0a','Are\x20you\x20sure\x20you\x20want\x20to\x20update\x20Balance\x20Bot\x20now?','access\x20timeout','use','temp/','expiry','get-messages','login2fa_','145971MfmoVq','/:bot/configuration','login\x20not\x20required','hasOwnProperty','connection','storeHeadless','alias','telegramChatId','7338352lngrBZ','https://pro-api.coinmarketcap.com/v2/cryptocurrency/quotes/latest','function','Login\x20rejected','assign','botID','sortBy','::ffff:7f00:1','Unauthorized\x20attempt\x20to\x20store\x20fiat\x20configuration','telegramEvents','User\x20has\x20been\x20validated','***','getMonth','/start','track','/portfolio\x20-\x20show\x20bot\x20portfolio\x0a','bot-','=>\x20Go\x20to\x20#CYA#http://','5239468ZYOVVQ','/off\x20-\x20stop\x20bot(s)\x0a','slice','zip/','full','command','ipaddr.js','referer','tempaccess_5_','get','invalid\x20credentials','-config.json','live','test','privateKeyToPem','connected','\x20>\x20','version','42OyyFZs','code','apply','title','disabled','7545456PJfadX','output-000.log','backup-files','Unauthorized\x20attempt\x20to\x20store\x20configuration','Unauthorized\x20attempt\x20to\x20place\x20market\x20order','/reinstall\x20-\x20reinstall\x20Balance\x20Bot\x0a','match','tkn','blacklist','bbUsername','storeConfiguration','socket','token','Restore\x20backup\x20file\x20','isDirectory','For\x20which\x20bot\x20do\x20you\x20want\x20the\x20metrics?','116FgSCzs','temporary\x20access\x20timeout','show','Disabled\x20','node-forge','bbPassword','headless','kind','Please\x20confirm\x20restoring\x20in\x20your\x20Telegram\x20bot','sockets','headers','username','output-002.log','isIPv4MappedAddress','notification','toggle-bot-mode','Unauthorized\x20attempt\x20to\x20download\x20','\x20|\x20user:\x20...','lowdb','Ok,\x20consider\x20updating\x20Balance\x20Bot\x20later','temporary\x20token\x20generated','new-disabled','output-001.log','error','/:bot','lastmsgemitted','config_alerts','Network\x20Interfaces:','Logged\x20out\x20user\x20...','Unauthorized\x20attempt\x20to\x20cancel\x20loading\x20coins','loginRequired','stringify','readdirSync','BCT','bb-secure.json','/download/:type','http://localhost:','argv','enabled','bb/','sort'];_0x4f6b=function(){return _0xa634b7;};return _0x4f6b();}function refreshToken(_0x1fe6a4){const _0x312819=_0x2bc9c3,_0x570638=generateLoginToken(_0x1fe6a4);return{'allow':!![],'reason':_0x312819(0x36b),'token':_0x570638};}function validateAccess(_0x5c6bdf,_0x3ef6f8,_0x12f2cd){const _0x24e483=_0x2bc9c3,_0x51296c=_0x12f2cd?_0x12f2cd:devices[_0x3ef6f8]['ip'];let _0x1ce20a;const _0x2612a=_0x43f35c=>{const _0x11ec43=_0x4a19;if(settings[_0x11ec43(0x1e7)]){if(settings[_0x11ec43(0x369)]){if(telegram2FaApproved(_0x3ef6f8)){const _0xde4ecd=generateLoginToken(_0x3ef6f8);return{'allow':!![],'reason':_0x11ec43(0x244),'token':_0xde4ecd};}else return{'allow':![],'reason':_0x11ec43(0x317),'token':null};}else return _0x1ce20a=validToken(_0x43f35c,_0x3ef6f8),_0x1ce20a['hasOwnProperty']('success')?{'allow':!![],'reason':_0x11ec43(0x37c),'token':_0x43f35c}:{'allow':![],'reason':_0x11ec43(0x317),'token':null};}else return{'allow':!![],'reason':_0x11ec43(0x18a),'token':null};};if(settings[_0x24e483(0x340)]){let _0xd11b0a=[...settings['whitelist'],_0x24e483(0x2dd),_0x24e483(0x36f),_0x24e483(0x307),_0x24e483(0x197)];if(_0xd11b0a[_0x24e483(0x2d6)](_0x51296c))return _0x2612a(_0x5c6bdf);else{_0x1ce20a=validToken(_0x5c6bdf,_0x3ef6f8);if(_0x1ce20a[_0x24e483(0x18b)](_0x24e483(0x230)))return _0x2612a(_0x5c6bdf);else{if(telegramIpApproved(_0x3ef6f8)){const _0xb2f45d=generateToken(_0x3ef6f8);return _0x1ce20a=_0x2612a(_0x5c6bdf),_0x1ce20a['allow']?{'allow':!![],'reason':'temporary\x20token\x20generated','token':_0xb2f45d}:_0x1ce20a;}else return settings[_0x24e483(0x2f8)]?{'allow':![],'reason':_0x24e483(0x257),'token':null}:{'allow':![],'reason':_0x24e483(0x388),'token':null};}}}else return _0x2612a(_0x5c6bdf);}function timelyDecrypt(_0x6ac9b1,_0x259e86,_0x620a62='@'){const _0x49b4d1=_0x2bc9c3;if(_0x6ac9b1)try{const _0x2a7ad2=decryptRSA(secure[_0x49b4d1(0x214)],_0x6ac9b1),_0x54140f=_0x2a7ad2[_0x49b4d1(0x345)](_0x620a62)[0x0],_0x2a71b5=_0x2a7ad2[_0x49b4d1(0x345)](_0x620a62)[0x1],_0x4bc566=new Date()['getTime']();if(_0x259e86){if(_0x4bc566-_0x2a71b5<maxSecretAge*0x3e8)return _0x54140f;else return![];}else return _0x54140f;}catch(_0x57bcf2){return![];}else return![];}const validToken=(_0x39b6fa,_0xcaeb5d)=>{const _0x3bd16d=_0x2bc9c3,_0x3ff6eb=devices[_0xcaeb5d]['ip'];if(!_0x39b6fa)return{'error':_0x3bd16d(0x2e1)};for(let _0x148fc6 of blacklist){if(_0x148fc6[_0x3bd16d(0x1c5)]==_0x39b6fa)return{'error':_0x3bd16d(0x2e4)};}let _0x33e9cf;try{_0x33e9cf=jwt['verify'](_0x39b6fa,secure[_0x3bd16d(0x32b)]+_0xcaeb5d);}catch{return{'error':_0x3bd16d(0x354)};}if(!_0x33e9cf[_0x3bd16d(0x18b)]('clientip')&&!_0x33e9cf['hasOwnProperty'](_0x3bd16d(0x1d4))||!_0x33e9cf[_0x3bd16d(0x18b)](_0x3bd16d(0x287)))return{'error':_0x3bd16d(0x39a)};if(!_0x33e9cf[_0x3bd16d(0x18b)](_0x3bd16d(0x1d4))&&_0x33e9cf[_0x3bd16d(0x18b)](_0x3bd16d(0x1ff))){const {clientip:_0x5a4411}=_0x33e9cf;return _0x3ff6eb==_0x5a4411?{'success':'User\x20has\x20been\x20validated'}:{'error':_0x3bd16d(0x24f)};}else{if(_0x33e9cf['hasOwnProperty']('username')&&_0x33e9cf[_0x3bd16d(0x18b)]('clientip')){const {username:_0x179b5c,clientip:_0x23bf61}=_0x33e9cf;return settings[_0x3bd16d(0x1c2)]==_0x179b5c&&_0x3ff6eb==_0x23bf61?{'success':_0x3bd16d(0x19a)}:{'error':_0x3bd16d(0x2cf)};}}},generateLoginToken=_0x118baf=>{const _0x253b0e=_0x2bc9c3;if(_0x118baf){const _0x344485=devices[_0x118baf]['ip'];return jwt['sign']({'username':settings['bbUsername'],'clientip':_0x344485},secure[_0x253b0e(0x32b)]+_0x118baf,{'expiresIn':tokenRefresh*0x3c,'allowInsecureKeySizes':!![]});}else return![];},generateToken=_0x5b63e3=>{const _0x1c790a=_0x2bc9c3;if(_0x5b63e3){const _0x1945cf=devices[_0x5b63e3]['ip'];return jwt[_0x1c790a(0x329)]({'clientip':_0x1945cf},secure['secret']+_0x5b63e3,{'expiresIn':devices[_0x5b63e3]['telegramIpApproval'][_0x1c790a(0x3ac)]*0x3c,'allowInsecureKeySizes':!![]});}else return![];},telegramIpApproved=_0x2c513d=>{const _0x2f6188=_0x2bc9c3;let _0x32869a=![];return devices[_0x2c513d][_0x2f6188(0x2ba)]&&devices[_0x2c513d]['telegramIpApproval'][_0x2f6188(0x3ac)]!=_0x2f6188(0x299)&&(_0x32869a=devices[_0x2c513d][_0x2f6188(0x2ba)][_0x2f6188(0x1ff)]==devices[_0x2c513d]['ip']&&new Date()[_0x2f6188(0x379)]()-devices[_0x2c513d]['telegramIpApproval'][_0x2f6188(0x237)]<devices[_0x2c513d][_0x2f6188(0x2ba)][_0x2f6188(0x3ac)]*0x3c*0x3e8),_0x32869a;},telegram2FaApproved=_0x1567f1=>{const _0x1d8df8=_0x2bc9c3;let _0x57557a=![];return devices[_0x1567f1]['telegram2FaApproval']&&devices[_0x1567f1][_0x1d8df8(0x343)][_0x1d8df8(0x3ac)]!='reject'&&(_0x57557a=devices[_0x1567f1][_0x1d8df8(0x343)]['clientip']==devices[_0x1567f1]['ip']&&new Date()[_0x1d8df8(0x379)]()-devices[_0x1567f1]['telegram2FaApproval'][_0x1d8df8(0x237)]<devices[_0x1567f1][_0x1d8df8(0x343)][_0x1d8df8(0x3ac)]*0x3c*0x3e8),_0x57557a;},normalizeIP=_0x1adef6=>{const _0x4a40de=_0x2bc9c3;let _0x1629f0=null,_0x305023=null;if(ipaddr[_0x4a40de(0x1f4)](_0x1adef6)){const _0x9b7e3f=ipaddr[_0x4a40de(0x22b)](_0x1adef6);_0x9b7e3f[_0x4a40de(0x1d0)]()===_0x4a40de(0x2da)?(_0x9b7e3f[_0x4a40de(0x1d6)]()&&(_0x1629f0=_0x9b7e3f[_0x4a40de(0x2c5)]()[_0x4a40de(0x304)]()),_0x305023=_0x9b7e3f['toString']()):(_0x1629f0=_0x9b7e3f[_0x4a40de(0x304)](),_0x305023=_0x9b7e3f[_0x4a40de(0x29b)]()[_0x4a40de(0x304)]());}return{'show':_0x1629f0?_0x1629f0:_0x305023,'store':_0x305023};};function formatDate(_0x566c31){const _0x4704ca=_0x2bc9c3;return _0x566c31['getFullYear']()+'/'+(_0x566c31[_0x4704ca(0x19c)]()+0x1)['toString']()[_0x4704ca(0x341)](0x2,'0')+'/'+_0x566c31[_0x4704ca(0x384)]()[_0x4704ca(0x304)]()[_0x4704ca(0x341)](0x2,'0')+'\x20'+_0x566c31[_0x4704ca(0x28f)]()[_0x4704ca(0x304)]()[_0x4704ca(0x341)](0x2,'0')+':'+_0x566c31[_0x4704ca(0x24b)]()[_0x4704ca(0x304)]()[_0x4704ca(0x341)](0x2,'0')+':'+_0x566c31[_0x4704ca(0x2bb)]()['toString']()[_0x4704ca(0x341)](0x2,'0');}function sleep(_0x1f8076){return new Promise(_0x58c8aa=>setTimeout(_0x58c8aa,_0x1f8076));}